webpackJsonp([1],{"4r9G":function(t,e,a){"use strict";var i=a("ZLEe"),s=a.n(i),n=a("hRKE"),o=a.n(n),l=a("MgeX"),r=a.n(l),c=a("3cXf"),m=a.n(c),u=a("r4lz"),d=a.n(u),g=a("9bLE"),h={name:"EditStart",data:function(){return{lockImg:"",unLockImg:"",showStatus:!1,startData:null,publicImage:null,maskStatus:!1,label:"1",startBgStatus:!0,startBtnStatus:!0,gameBgSoundData:null,resourceData:null,tabShowStatus:{startBg:!1,startBtn:!1,gameBgAudio:!1}}},props:["allData"],methods:{verifyNumber:function(t){return isNaN(t)&&(t=0),t=parseFloat(t)>=0?function(t){return/^-?\d*\.\d+$/.test(t)}(parseFloat(t))?parseFloat(t.split(".")[0]+"."+t.split(".")[1].substr(0,1)):/^\d*\.+$/g.test(t)?parseFloat(t)+".":t?parseFloat(t):0:0},setElementStatus:function(t,e,a,i){var s,n=t+e.substring(0,1).toUpperCase()+e.substring(1),o=window.stage.getChildByName("START").children[0].getChildByName(t+"Container").getChildByName(n),l=this.startData[t][e];if(o)if("scale"===a)s=l[a],/^-?\d*\.\d+$/.test(s)&&(l[a]=parseFloat(l[a].split(".")[0]+"."+l[a].split(".")[1].substr(0,1))),o[a].set(l[a]);else{if(("x"===a||"width"===a)&&l[a]>1920&&"sprite"!=e&&"animate"!=e)return l[a]=parseFloat(o[a]).toFixed(0),this.$message.error("输入数值超出范围 应为0-1920"),!1;if(("y"===a||"height"===a)&&l[a]>1080&&"sprite"!=e&&"animate"!=e)return l[a]=parseFloat(o[a]).toFixed(0),this.$message.error("输入数值超出范围 应为0-1080"),!1;"x"!==a&&"y"!==a&&"width"!==a&&"height"!==a||(l[a]=this.verifyNumber(l[a]),o[a]=l[a]),"width"===a&&l.lock&&(l.height=(l[a]/i).toFixed(0),o.height=l.height),"height"===a&&l.lock&&(l.width=(l[a]*i).toFixed(0),o.width=l.width)}else this.$message({type:"warning",message:"舞台未绑定元素"}),l[a]=0},verifyAnimationFiles:function(t){var e=[],a=r()(t).map(function(t,e){return t.name}).map(function(t){return e.push(t.split(".")[1]),t.split(".")[0]}),i=e.sort(function(t,e){return t.length-e.length}).toString(),s=["png","json","atlas"].toString(),n=a[0];return a.every(function(t,e){return n===t})&&i===s},setBgSoundAttr:function(t,e){var a,i=window.stage.getChildByName("gameBgSound"),s=this.gameBgSoundData;if(i)if("scale"===e)a=s[e],/^-?\d*\.\d+$/.test(a)&&(s[e]=parseFloat(s[e].split(".")[0]+"."+s[e].split(".")[1].substr(0,1))),i[e].set(s[e]);else{if(("x"===e||"width"===e)&&s[e]>1920&&"sprite"!=t&&"animate"!=t)return s[e]=parseFloat(i[e]).toFixed(0),this.$message.error("输入数值超出范围 应为0-1920"),!1;if(("y"===e||"height"===e)&&s[e]>1080&&"sprite"!=t&&"animate"!=t)return s[e]=parseFloat(i[e]).toFixed(0),this.$message.error("输入数值超出范围 应为0-1080"),!1;"x"!==e&&"y"!==e&&"width"!==e&&"height"!==e||(s[e]=this.verifyNumber(s[e]),i[e]=s[e]),"width"===e&&s.lock&&(s.height=(s[e]/ratio).toFixed(0),i.height=s.height),"height"===e&&s.lock&&(s.width=(s[e]*ratio).toFixed(0),i.width=s.width)}else this.$message({type:"warning",message:"舞台未绑定元素"}),s[e]=0},isFloat:function(t){return/^-?\d*\.\d+$/.test(t)},getJSON:function(){var t=this;this.startData=this.allData.one.start,this.gameBgSoundData=this.allData.one.gameBgSound,this.getResourceData(function(){t.showStatus=!0,t.startData.startBtn.image.show?t.label="1":t.startData.startBtn.animate.show?t.label="2":t.startData.startBtn.sprite.show?t.label="3":t.label="1"})},setResource:function(t,e){if(this.startData[t][e].show){var a=t+e.substring(0,1).toUpperCase()+e.substring(1),i=window.stage.getChildByName("START").children[0].getChildByName(t+"Container").getChildByName(a);i&&(i.visible=!0)}else{this.startData[t][e].name="",this.startData[t][e].width&&(this.startData[t][e].width=0),this.startData[t][e].height&&(this.startData[t][e].height=0),this.startData[t][e].x&&(this.startData[t][e].x=0),this.startData[t][e].y&&(this.startData[t][e].y=0),this.startData[t][e].scale&&(this.startData[t][e].scale=1);var s=t+e.substring(0,1).toUpperCase()+e.substring(1),n=window.stage.getChildByName("START").children[0].getChildByName(t+"Container").getChildByName(s),o=window.stage.getChildByName("START").children[0].getChildByName(t+"Container");n&&o.removeChild(n)}},getResourceData:function(t){var e=this;this.$http.get("/getResourceJSON",{params:{}}).then(function(a){e.resourceData=a,e.lockImg=e.resourceData.image_lock_on,e.unLockImg=e.resourceData.image_lock_off,t&&t()})},startBtn:function(t){r()(this.startData.startBtn).forEach(function(t){t.show=!1,t.name="",t.x&&(t.x=0),t.y&&(t.y=0),t.width&&(t.width=0),t.height&&(t.height=0),t.scale&&(t.scale=1)}),window.stage.getChildByName("START").children[0].getChildByName("startBtnContainer").removeChildren(),this.startData.startBtn[t].show=!0},setbgAudioStatus:function(){this.gameBgSoundData.show?this.tabShowStatus.gameBgAudio=!0:(window.stage.getChildByName("gameBgSound")&&window.stage.removeChild(window.stage.getChildByName("gameBgSound")),this.gameBgSoundData.audio="",this.gameBgSoundData.animate_name="",this.gameBgSoundData.x=0,this.gameBgSoundData.y=0,this.tabShowStatus.gameBgAudio=!1)},tabShow:function(t,e){var a=this,i=this.$refs[e];this.tabShowStatus[t]?(this.tabShowStatus[t]=!1,i.className="el-icon-arrow-right"):(s()(this.tabShowStatus).forEach(function(t,e){a.tabShowStatus[t]=!1}),this.tabShowStatus[t]=!0,i.className="el-icon-arrow-down",this.gameBgSoundData.show||(this.tabShowStatus.gameBgAudio=!1,i.className="el-icon-arrow-right"))},uploadImage:function(t,e,a){var i=this,s=a.target.files[0].name.split(".")[a.target.files[0].name.split(".").length-1];return-1===["jpg","png"].indexOf(s)?(this.$message({message:"上传类型不符",type:"error"}),void(a.target.value="")):0===a.target.files.length?(this.$message({message:"上传文件个数不符合",type:"warning"}),void(a.target.value="")):a.target.files[0].size/1024/1024>1?(this.$message({message:"上传文件大小在1M以内",type:"warning"}),void(a.target.value="")):void this.$http.post("/uploadingImage",{image:a.target.files[0]},{headers:{"Content-Type":"multipart/form-data"}}).then(function(s){i.startData[t][e].name=s.resourceName,i.getResourceData();var n=t+e.substring(0,1).toUpperCase()+e.substring(1),o=window.stage.getChildByName("START").children[0].getChildByName(t+"Container").getChildByName(n),l=window.stage.getChildByName("START").children[0].getChildByName(t+"Container");o?(o.texture=new g.Texture.fromImage(s.path),"startBg"!==t&&new d.a(o,function(a,s){i.startData[t][e].x=a.toFixed(1),i.startData[t][e].y=s.toFixed(1)}),i.startData[t][e].show?o.visible=!0:o.visible=!1):((o=new g.Sprite.fromImage(s.path)).name=n,o.x=0,o.y=0,l.addChild(o),"startBg"!==t&&new d.a(o,function(a,s){i.startData[t][e].x=a.toFixed(1),i.startData[t][e].y=s.toFixed(1)}),i.startData[t][e].show?o.visible=!0:o.visible=!1),"startBg"!==t&&(i.startData[t][e].width=s.width,i.startData[t][e].height=s.height,i.startData[t][e].x?i.startData[t][e].x=i.startData[t][e].x:i.startData[t][e].x=0,i.startData[t][e].y?i.startData[t][e].y=i.startData[t][e].y:i.startData[t][e].y=0),o.width=s.width,o.height=s.height,a.target.value=""})},verifySpriteFiles:function(t){var e=[],a=r()(t).map(function(t,e){return t.name}).map(function(t){return e.push(t.split(".")[1]),t.split(".")[0]}),i=e.sort(function(t,e){return t.length-e.length}).toString(),s=["png","json"].toString(),n=a[0];return a.every(function(t,e){return n===t})&&i===s},uploadAnimation:function(t,e){var a=this;if(0===e.target.files.length||3!==e.target.files.length)return this.$message({message:"上传文件个数不符合",type:"warning"}),void(e.target.value="");if(!this.verifyAnimationFiles(e.target.files))return this.$message({message:"上传文件不符合",type:"warning"}),void(e.target.value="");var i={};r()(e.target.files).forEach(function(t,e){i["animation"+(e+1)]=t}),this.$http.post("/uploadingAnimation",i,{headers:{"Content-Type":"multipart/form-data"}}).then(function(i){if(console.log(i.path),e.target.value="","gameBgAudio"===t){a.gameBgSoundData.animate_name=i.resourceName,a.gameBgSoundData.scale=1;var s=window.stage,n=void 0;if(window.stage.getChildByName("gameBgSound")){var o=(n=window.stage.getChildByName("gameBgSound")).x,l=n.y;s.removeChild(n);var r=(new Date).getTime();PIXI.loader.add("animation"+r,i.path),PIXI.loader.load(function(t,e){(n=new PIXI.spine.Spine(e["animation"+r].spineData)).x=o,n.y=l,n.name="gameBgSound",n.state.setAnimation(1,"animation",!0),s.addChild(n),s.setChildIndex(n,s.children.length-1),new d.a(n,function(t,e){a.gameBgSoundData.x=t.toFixed(1),a.gameBgSoundData.y=e.toFixed(1)})}),a.allData.one.gameBgSound.show&&a.allData.one.gameBgSound.audio?n&&(n.visible=!0):n&&(n.visible=!1)}else{a.gameBgSoundData.x=0,a.gameBgSoundData.y=0;var c=(new Date).getTime();PIXI.loader.add("animation"+c,i.path),PIXI.loader.load(function(t,e){(n=new PIXI.spine.Spine(e["animation"+c].spineData)).name="gameBgSound",n.x=0,n.y=0,n.state.setAnimation(1,"animation",!0),s.addChild(n),s.setChildIndex(n,s.children.length-1),new d.a(n,function(t,e){a.gameBgSoundData.x=t.toFixed(1),a.gameBgSoundData.y=e.toFixed(1)}),a.allData.one.gameBgSound.show&&a.allData.one.gameBgSound.audio?n&&(n.visible=!0):n&&(n.visible=!1)})}}else{a.startData[t].animate.name=i.resourceName;var m=t+"Animate",u=window.stage.getChildByName("START").children[0].getChildByName(t+"Container").getChildByName(m),g=window.stage.getChildByName("START").children[0].getChildByName(t+"Container");if(u){var h=u.x,p=u.y;g.removeChild(u);var v=(new Date).getTime();PIXI.loader.add("animation"+v,i.path),PIXI.loader.load(function(e,i){(u=new PIXI.spine.Spine(i["animation"+v].spineData)).x=h,u.y=p,u.scale.set(a.startData[t].animate.scale),u.name=m,u.state.setAnimation(1,"animation",!0),g.addChild(u),new d.a(u,function(e,i){a.startData[t].animate.x=e.toFixed(1),a.startData[t].animate.y=i.toFixed(1)}),a.startData[t].animate.show?u&&(u.visible=!0):u&&(u.visible=!1)})}else{a.startData[t].animate.x=0,a.startData[t].animate.y=0;var f=(new Date).getTime();PIXI.loader.add("animation"+f,i.path),PIXI.loader.load(function(e,i){(u=new PIXI.spine.Spine(i["animation"+f].spineData)).x=0,u.y=0,u.scale.set(a.startData[t].animate.scale),u.name=m,u.state.setAnimation(1,"animation",!0),g.addChild(u),new d.a(u,function(e,i){a.startData[t].animate.x=e.toFixed(1),a.startData[t].animate.y=i.toFixed(1)}),a.startData[t].animate.show?u&&(u.visible=!0):u&&(u.visible=!1)})}}})},uploadSprite:function(t,e){var a=this;if(0===e.target.files.length||2!==e.target.files.length)return this.$message({message:"上传文件个数不符合",type:"warning"}),void(e.target.value="");if(!this.verifySpriteFiles(e.target.files))return this.$message({message:"上传文件不符合",type:"warning"}),void(e.target.value="");var i={};r()(e.target.files).forEach(function(t,e){i["sprite"+(e+1)]=t}),console.log(i),this.$http.post("/uploadingSprite",i,{headers:{"Content-Type":"multipart/form-data"}}).then(function(i){e.target.value="";a.startData[t].sprite.name=i.resourceName;var s=t+"Sprite",n=window.stage.getChildByName("START").children[0].getChildByName(t+"Container").getChildByName(s),o=window.stage.getChildByName("START").children[0].getChildByName(t+"Container");if(n){var l=n.x,r=n.y;o.removeChild(n);var c=(new Date).getTime();console.log(c),PIXI.loader.add("sprite"+c,i.path),PIXI.loader.load(function(e,i){var m=i["sprite"+c].spritesheet,u=[];for(var g in m.textures)u.push(m.textures[g]);(n=new PIXI.extras.AnimatedSprite(u)).x=l,n.y=r,n.scale.set(a.startData[t].sprite.scale),n.animationSpeed=1,n.play(),n.name=s,o.addChild(n),new d.a(n,function(e,i){a.startData[t].sprite.x=e.toFixed(1),a.startData[t].sprite.y=i.toFixed(1)}),a.startData[t].sprite.show?n&&(n.visible=!0):n&&(n.visible=!1)})}else{a.startData[t].sprite.x=0,a.startData[t].sprite.y=0;var m=(new Date).getTime();PIXI.loader.add("sprite"+m,i.path),PIXI.loader.load(function(e,i){var l=i["sprite"+m].spritesheet,r=[];for(var c in l.textures)r.push(l.textures[c]);(n=new PIXI.extras.AnimatedSprite(r)).x=0,n.y=0,n.scale.set(a.startData[t].sprite.scale),n.animationSpeed=1,n.play(),n.name=s,o.addChild(n),new d.a(n,function(e,i){a.startData[t].sprite.x=e.toFixed(1),a.startData[t].sprite.y=i.toFixed(1)}),a.startData[t].sprite.show?n&&(n.visible=!0):n&&(n.visible=!1)})}})},uploadAudio:function(t){var e=this,a=t.target.files[0].name.split(".")[t.target.files[0].name.split(".").length-1];return-1===["mp3","wav"].indexOf(a)?(this.$message({message:"上传类型不符",type:"error"}),void(t.target.value="")):0===t.target.files.length?(this.$message({message:"上传文件个数不符合",type:"warning"}),void(t.target.value="")):void this.$http.post("/uploadingAudio",{audio:t.target.files[0]},{headers:{"Content-Type":"multipart/form-data"}}).then(function(a){t.target.value="",e.gameBgSoundData.audio=a.resourceName;var i=stage.getChildByName("gameBgSound");e.allData.one.gameBgSound.show&&e.allData.one.gameBgSound.animate_name?i&&(i.visible=!0):i&&(i.visible=!1)})},showBigImage:function(t){this.maskStatus=!0,this.publicImage=t.target.src},controlStartPage:function(t){var e=stage.getChildByName("gameBgSound"),a=stage.getChildByName("START");t?(e&&(e.visible=!0),a&&(a.visible=!0)):(e&&(e.visible=!1),a&&(a.visible=!1))},lockStatusData:function(t,e){if(t.image.show&&t.image.name){if(!t.image.width||!t.image.height)return void this.$message.error("绑定对象的宽高都不可为空");t.image.lock?(e.currentTarget.setAttribute("data-lock","false"),t.image.ratio=0,t.image.lock=!1):(e.currentTarget.setAttribute("data-lock","true"),t.image.ratio=parseFloat(t.image.width)/parseFloat(t.image.height),t.image.lock=!0)}else this.$message({type:"warning",message:"舞台未绑定元素!"})}},mounted:function(){this.getJSON(),this.controlStartPage(this.startData.show)}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.showStatus?a("div",{staticClass:"start"},[a("el-switch",{staticStyle:{"margin-left":"15px"},attrs:{"active-color":"#77DC04","active-text":"是否应用","inactive-color":"#ff4949"},on:{change:function(e){return t.controlStartPage(t.startData.show)}},model:{value:t.startData.show,callback:function(e){t.$set(t.startData,"show",e)},expression:"startData.show"}}),t._v(" "),t.startData.show?a("div",{staticStyle:{"margin-top":"8px"}},[a("div",{staticClass:"start-title"},[a("i",{ref:"startBgTitle",class:t.tabShowStatus.startBg?"el-icon-arrow-down":"el-icon-arrow-right",on:{click:function(e){return t.tabShow("startBg","startBgTitle")}}}),t._v(" "),a("span",{on:{click:function(e){return t.tabShow("startBg","startBgTitle")}}},[t._v("\n                背景图\n            ")])]),t._v(" "),t.tabShowStatus.startBg?a("div",{staticClass:"start-inner"},[a("div",{staticClass:"edit-checkbox-title"},[a("el-checkbox",{attrs:{size:"small"},on:{change:function(e){return t.setResource("startBg","image")}},model:{value:t.startData.startBg.image.show,callback:function(e){t.$set(t.startData.startBg.image,"show",e)},expression:"startData.startBg.image.show"}},[t._v("图片")])],1),t._v(" "),a("div",{staticClass:"upload"},[a("div",{staticClass:"img-box"},[a("img",{attrs:{src:t.resourceData[t.startData.startBg.image.name],alt:"",width:"131",height:"96"},on:{click:function(e){return t.showBigImage(e)}}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改图片")]),t._v(" "),a("input",{attrs:{type:"file"},on:{change:function(e){return t.uploadImage("startBg","image",e)}}})])])]),t._v(" "),a("div",{staticClass:"edit-checkbox-title"},[a("el-checkbox",{attrs:{size:"small"},on:{change:function(e){return t.setResource("startBg","sprite")}},model:{value:t.startData.startBg.sprite.show,callback:function(e){t.$set(t.startData.startBg.sprite,"show",e)},expression:"startData.startBg.sprite.show"}},[t._v("精灵序列图")])],1),t._v(" "),a("div",{staticClass:"upload"},[a("span",{staticClass:"file-title"},[t._v("\n                    精灵文件：\n                ")]),t._v(" "),a("div",{staticClass:"animate-box"},[a("span",{domProps:{textContent:t._s(t.startData.startBg.sprite.name)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改文件")]),t._v(" "),a("input",{attrs:{type:"file",multiple:"multiple"},on:{change:function(e){return t.uploadSprite("startBg",e)}}})])])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus("startBg","sprite","x")}},model:{value:t.startData.startBg.sprite.x,callback:function(e){t.$set(t.startData.startBg.sprite,"x",e)},expression:"startData.startBg.sprite.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus("startBg","sprite","y")}},model:{value:t.startData.startBg.sprite.y,callback:function(e){t.$set(t.startData.startBg.sprite,"y",e)},expression:"startData.startBg.sprite.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus("startBg","sprite","scale")}},model:{value:t.startData.startBg.sprite.scale,callback:function(e){t.$set(t.startData.startBg.sprite,"scale",e)},expression:"startData.startBg.sprite.scale"}},[a("template",{slot:"prepend"},[t._v("Scale：")])],2),t._v(" "),a("div",{staticClass:"edit-switch"},[a("span",[t._v("loop")]),t._v(" "),a("el-switch",{attrs:{"active-color":"#77DC04","inactive-color":"#ff4949"},model:{value:t.startData.startBg.sprite.loop,callback:function(e){t.$set(t.startData.startBg.sprite,"loop",e)},expression:"startData.startBg.sprite.loop"}})],1),t._v(" "),a("div",{staticClass:"edit-checkbox-title"},[a("el-checkbox",{attrs:{size:"small"},on:{change:function(e){return t.setResource("startBg","animate")}},model:{value:t.startData.startBg.animate.show,callback:function(e){t.$set(t.startData.startBg.animate,"show",e)},expression:"startData.startBg.animate.show"}},[t._v("动画")])],1),t._v(" "),a("div",{staticClass:"upload"},[a("span",{staticClass:"file-title"},[t._v("动画文件：")]),t._v(" "),a("div",{staticClass:"animate-box"},[a("span",{domProps:{textContent:t._s(t.startData.startBg.animate.name)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改文件")]),t._v(" "),a("input",{attrs:{type:"file",multiple:"multiple"},on:{change:function(e){return t.uploadAnimation("startBg",e)}}})])])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus("startBg","animate","x")}},model:{value:t.startData.startBg.animate.x,callback:function(e){t.$set(t.startData.startBg.animate,"x",e)},expression:"startData.startBg.animate.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus("startBg","animate","y")}},model:{value:t.startData.startBg.animate.y,callback:function(e){t.$set(t.startData.startBg.animate,"y",e)},expression:"startData.startBg.animate.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus("startBg","animate","scale")}},model:{value:t.startData.startBg.animate.scale,callback:function(e){t.$set(t.startData.startBg.animate,"scale",e)},expression:"startData.startBg.animate.scale"}},[a("template",{slot:"prepend"},[t._v("Scale：")])],2),t._v(" "),a("div",{staticClass:"edit-switch"},[a("span",[t._v("loop")]),t._v(" "),a("el-switch",{attrs:{"active-color":"#77DC04","inactive-color":"#ff4949"},model:{value:t.startData.startBg.animate.loop,callback:function(e){t.$set(t.startData.startBg.animate,"loop",e)},expression:"startData.startBg.animate.loop"}})],1)],1):t._e(),t._v(" "),a("div",{staticClass:"start-title"},[a("i",{ref:"startBtnTitle",class:t.tabShowStatus.startBtn?"el-icon-arrow-down":"el-icon-arrow-right",on:{click:function(e){return t.tabShow("startBtn","startBtnTitle")}}}),t._v(" "),a("span",{on:{click:function(e){return t.tabShow("startBtn","startBtnTitle")}}},[t._v("\n                开始按钮\n            ")])]),t._v(" "),t.tabShowStatus.startBtn?a("div",{staticClass:"start-inner"},[a("div",{staticClass:"edit-radio-title"},[a("el-radio",{attrs:{label:"1"},on:{change:function(e){return t.startBtn("image")}},model:{value:t.label,callback:function(e){t.label=e},expression:"label"}},[t._v("图片")]),t._v(" "),a("el-radio",{attrs:{label:"2"},on:{change:function(e){return t.startBtn("animate")}},model:{value:t.label,callback:function(e){t.label=e},expression:"label"}},[t._v("动画")]),t._v(" "),a("el-radio",{attrs:{label:"3"},on:{change:function(e){return t.startBtn("sprite")}},model:{value:t.label,callback:function(e){t.label=e},expression:"label"}},[t._v("精灵序列")])],1),t._v(" "),"1"===t.label?a("div",[a("div",{staticClass:"upload"},[a("div",{staticClass:"img-box"},[a("img",{attrs:{src:t.resourceData[t.startData.startBtn.image.name],alt:"",width:"131",height:"96"},on:{click:function(e){return t.showBigImage(e)}}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改图片")]),t._v(" "),a("input",{attrs:{type:"file"},on:{change:function(e){return t.uploadImage("startBtn","image",e)}}})])])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus("startBtn","image","x")}},model:{value:t.startData.startBtn.image.x,callback:function(e){t.$set(t.startData.startBtn.image,"x",e)},expression:"startData.startBtn.image.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus("startBtn","image","y")}},model:{value:t.startData.startBtn.image.y,callback:function(e){t.$set(t.startData.startBtn.image,"y",e)},expression:"startData.startBtn.image.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2),t._v(" "),a("div",{staticClass:"lockStatus"},[a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus("startBtn","image","width",t.startData.startBtn.image.ratio)}},model:{value:t.startData.startBtn.image.width,callback:function(e){t.$set(t.startData.startBtn.image,"width",e)},expression:"startData.startBtn.image.width"}},[a("template",{slot:"prepend"},[t._v("W：")])],2),t._v(" "),a("span",{staticClass:"lock_block",attrs:{lockRatio:t.startData.startBtn.image.ratio}},[a("img",{attrs:{src:t.startData.startBtn.image.lock?t.lockImg:t.unLockImg,"data-lock":"false",alt:""},on:{click:function(e){return t.lockStatusData(t.startData.startBtn,e)}}})]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus("startBtn","image","height",t.startData.startBtn.image.ratio)}},model:{value:t.startData.startBtn.image.height,callback:function(e){t.$set(t.startData.startBtn.image,"height",e)},expression:"startData.startBtn.image.height"}},[a("template",{slot:"prepend"},[t._v("H：")])],2)],1)],1):t._e(),t._v(" "),"2"===t.label?a("div",[a("div",{staticClass:"upload"},[a("span",{staticClass:"file-title"},[t._v("动画文件：")]),t._v(" "),a("div",{staticClass:"animate-box"},[a("span",{domProps:{textContent:t._s(t.startData.startBtn.animate.name)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改文件")]),t._v(" "),a("input",{attrs:{type:"file",multiple:"multiple"},on:{change:function(e){return t.uploadAnimation("startBtn",e)}}})])])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus("startBtn","animate","x")}},model:{value:t.startData.startBtn.animate.x,callback:function(e){t.$set(t.startData.startBtn.animate,"x",e)},expression:"startData.startBtn.animate.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus("startBtn","animate","y")}},model:{value:t.startData.startBtn.animate.y,callback:function(e){t.$set(t.startData.startBtn.animate,"y",e)},expression:"startData.startBtn.animate.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus("startBtn","animate","scale")}},model:{value:t.startData.startBtn.animate.scale,callback:function(e){t.$set(t.startData.startBtn.animate,"scale",e)},expression:"startData.startBtn.animate.scale"}},[a("template",{slot:"prepend"},[t._v("Scale：")])],2),t._v(" "),a("div",{staticClass:"edit-switch"},[a("span",[t._v("loop")]),t._v(" "),a("el-switch",{attrs:{"active-color":"#77DC04","inactive-color":"#ff4949"},model:{value:t.startData.startBtn.animate.loop,callback:function(e){t.$set(t.startData.startBtn.animate,"loop",e)},expression:"startData.startBtn.animate.loop"}})],1)],1):t._e(),t._v(" "),"3"===t.label?a("div",[a("div",{staticClass:"upload"},[a("span",{staticClass:"file-title"},[t._v("\n                        精灵文件：\n                    ")]),t._v(" "),a("div",{staticClass:"animate-box"},[a("span",{domProps:{textContent:t._s(t.startData.startBtn.sprite.name)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改文件")]),t._v(" "),a("input",{attrs:{type:"file",multiple:"multiple"},on:{change:function(e){return t.uploadSprite("startBtn",e)}}})])])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus("startBtn","sprite","x")}},model:{value:t.startData.startBtn.sprite.x,callback:function(e){t.$set(t.startData.startBtn.sprite,"x",e)},expression:"startData.startBtn.sprite.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus("startBtn","sprite","y")}},model:{value:t.startData.startBtn.sprite.y,callback:function(e){t.$set(t.startData.startBtn.sprite,"y",e)},expression:"startData.startBtn.sprite.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus("startBtn","sprite","scale")}},model:{value:t.startData.startBtn.sprite.scale,callback:function(e){t.$set(t.startData.startBtn.sprite,"scale",e)},expression:"startData.startBtn.sprite.scale"}},[a("template",{slot:"prepend"},[t._v("Scale：")])],2),t._v(" "),a("div",{staticClass:"edit-switch"},[a("span",[t._v("loop")]),t._v(" "),a("el-switch",{attrs:{"active-color":"#77DC04","inactive-color":"#ff4949"},model:{value:t.startData.startBtn.sprite.loop,callback:function(e){t.$set(t.startData.startBtn.sprite,"loop",e)},expression:"startData.startBtn.sprite.loop"}})],1)],1):t._e()]):t._e(),t._v(" "),a("div",{staticClass:"start-title"},[a("i",{ref:"gameBgAudioTitle",class:t.tabShowStatus.gameBgAudio?"el-icon-arrow-down":"el-icon-arrow-right",on:{click:function(e){return t.tabShow("gameBgAudio","gameBgAudioTitle")}}}),t._v(" "),a("span",{on:{click:function(e){return t.tabShow("gameBgAudio","gameBgAudioTitle")}}},[t._v("\n                背景音乐\n            ")]),t._v(" "),a("el-switch",{staticClass:"edit-title-switch",attrs:{"active-color":"#77DC04","inactive-color":"#ff4949"},on:{change:function(e){return t.setbgAudioStatus()}},model:{value:t.gameBgSoundData.show,callback:function(e){t.$set(t.gameBgSoundData,"show",e)},expression:"gameBgSoundData.show"}})],1),t._v(" "),t.tabShowStatus.gameBgAudio&&!0===t.gameBgSoundData.show?a("div",{staticClass:"start-inner"},[a("div",{staticClass:"bg-audio-title"},[t._v("\n                音频\n            ")]),t._v(" "),a("div",{staticClass:"bg-audio-inner"},[a("div",{staticClass:"upload"},[a("span",{staticClass:"file-title"},[t._v("音频文件：")]),t._v(" "),a("div",{staticClass:"animate-box"},[a("span",{domProps:{textContent:t._s(t.gameBgSoundData.audio)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改文件")]),t._v(" "),a("input",{attrs:{type:"file"},on:{change:function(e){return t.uploadAudio(e)}}})])])]),t._v(" "),a("div",{staticClass:"edit-range-audio"},[a("span",[t._v("音量：")]),t._v(" "),a("el-slider",{attrs:{min:Number(0),max:Number(1),step:Number(.1)},model:{value:t.gameBgSoundData.audioVolume,callback:function(e){t.$set(t.gameBgSoundData,"audioVolume",e)},expression:"gameBgSoundData.audioVolume"}})],1),t._v(" "),a("div",{staticClass:"edit-switch-audio"},[a("span",[t._v("loop")]),t._v(" "),a("el-switch",{attrs:{"active-color":"#77DC04","inactive-color":"#ff4949"},model:{value:t.gameBgSoundData.loop,callback:function(e){t.$set(t.gameBgSoundData,"loop",e)},expression:"gameBgSoundData.loop"}})],1)]),t._v(" "),a("div",{staticClass:"bg-audio-title"},[t._v("\n                图标动画\n            ")]),t._v(" "),a("div",{staticClass:"bg-audio-inner"},[a("div",{staticClass:"upload"},[a("span",{staticClass:"file-title"},[t._v("动画文件：")]),t._v(" "),a("div",{staticClass:"animate-box"},[a("span",{domProps:{textContent:t._s(t.gameBgSoundData.animate_name)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改文件")]),t._v(" "),a("input",{attrs:{type:"file",multiple:"multiple"},on:{change:function(e){return t.uploadAnimation("gameBgAudio",e)}}})])])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setBgSoundAttr("animate","x")}},model:{value:t.gameBgSoundData.x,callback:function(e){t.$set(t.gameBgSoundData,"x",e)},expression:"gameBgSoundData.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setBgSoundAttr("animate","y")}},model:{value:t.gameBgSoundData.y,callback:function(e){t.$set(t.gameBgSoundData,"y",e)},expression:"gameBgSoundData.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setBgSoundAttr("animate","scale")}},model:{value:t.gameBgSoundData.scale,callback:function(e){t.$set(t.gameBgSoundData,"scale",e)},expression:"gameBgSoundData.scale"}},[a("template",{slot:"prepend"},[t._v("Scale：")])],2)],1)]):t._e()]):t._e(),t._v(" "),t.maskStatus?a("div",{staticClass:"mask",on:{click:function(e){t.maskStatus=!1}}},[a("img",{attrs:{src:t.publicImage,alt:""}})]):t._e()],1):t._e()},staticRenderFns:[]};var v=a("C7Lr")(h,p,!1,function(t){a("Nd8d")},"data-v-6f9ccb7e",null).exports,f={name:"EditGamePublic",data:function(){return{lockImg:this.resourceData.image_lock_on,unLockImg:this.resourceData.image_lock_off,fontFamily:[{label:"微软雅黑",value:"Microsoft YaHei"},{label:"宋体",value:"SimSun"},{label:"黑体",value:"SimHei"},{label:"方正粗圆",value:"FZCuYuan-M03S"},{label:"方正粗圆简",value:"FZZhunYuan-M02S"}],textAlign:[{label:"左对齐",value:"left"},{label:"右对齐",value:"right"},{label:"居中对齐",value:"center"},{label:"两端对齐",value:"justify"}]}},props:["allData","gameData","resourceData","tabShowStatus","item","index"],methods:{verifyNumber:function(t){return isNaN(t)&&(t=0),t=parseFloat(t)>=0?function(t){return/^-?\d*\.\d+$/.test(t)}(parseFloat(t))?parseFloat(t.split(".")[0]+"."+t.split(".")[1].substr(0,1)):/^\d*\.+$/g.test(t)?parseFloat(t)+".":t?parseFloat(t):0:0},setElementStatus:function(t,e,a,i,s){var n,o="",l=(o="bgImage"===e?"gameBg":"stem")+a.substring(0,1).toUpperCase()+a.substring(1),r=window.stage.getChildByName("GAME").getChildByName("GAME"+t).children[0].getChildByName(o+"Container").getChildByName(l),c=this.gameData[t][e][a];if(r)if("scale"===i)n=c[i],/^-?\d*\.\d+$/.test(n)&&(c[i]=parseFloat(c[i].split(".")[0]+"."+c[i].split(".")[1].substr(0,1))),r[i].set(c[i]);else{if(("x"===i||"width"===i)&&c[i]>1920&&"sprite"!=a&&"animate"!=a)return c[i]=parseFloat(r[i]).toFixed(0),this.$message.error("输入数值超出范围 应为0-1920"),!1;if(("y"===i||"height"===i)&&c[i]>1080&&"sprite"!=a&&"animate"!=a)return c[i]=parseFloat(r[i]).toFixed(0),this.$message.error("输入数值超出范围 应为0-1080"),!1;"x"!==i&&"y"!==i&&"width"!==i&&"height"!==i||(c[i]=this.verifyNumber(c[i]),r[i]=c[i]),"width"===i&&c.lock&&(c.height=(c[i]/s).toFixed(0),r.height=c.height),"height"===i&&c.lock&&(c.width=(c[i]*s).toFixed(0),r.width=c.width)}else this.$message({type:"warning",message:"舞台未绑定元素"}),c[i]=0},setSubTitileAttr:function(t,e){var a="";a="soundImg"===t?"stemSound":"stemText";var i=window.stage.getChildByName("GAME").getChildByName("GAME"+this.index).getChildByName("STEMTITLE").children[0].getChildByName(a);if(i){if("x"===e&&this.item.subTitle[t][e]>1920)return this.$message.error("输入数值超出范围 应为0-1920"),void(this.item.subTitle[t][e]=i[e]);if("y"===e&this.item.subTitle[t][e]>1080)return this.$message.error("输入数值超出范围 应为0-1080"),void(this.item.subTitle[t][e]=i[e]);if(this.isFloat(parseFloat(this.item.subTitle[t][e])))this.item.subTitle[t][e]=parseFloat(this.item.subTitle[t][e].split(".")[0]+"."+this.item.subTitle[t][e].split(".")[1].substr(0,1));else{this.item.subTitle[t][e];this.item.subTitle[t][e]&&/^\d*\.+$/g.test(this.item.subTitle[t][e])?this.item.subTitle[t][e]=parseFloat(this.item.subTitle[t][e])+".":this.item.subTitle[t][e]=this.item.subTitle[t][e]?parseFloat(this.item.subTitle[t][e]):0}parseFloat(this.item.subTitle[t][e])<0&&(this.item.subTitle[t][e]=i[e]),i[e]=this.item.subTitle[t][e]}},setStemTextStatus:function(t){var e=window.stage.getChildByName("GAME").getChildByName("GAME"+this.index).getChildByName("STEMTITLE").children[0].getChildByName("stemText");e&&(e.visible=!!t)},setStemText:function(t){var e=this,a=this.item.subTitle,i=window.stage.getChildByName("GAME"),s=i.getChildByName("GAME"+this.index).getChildByName("STEMTITLE").children[0].getChildByName("stemText"),n=/^\d{1,3}$/;if("letterSpacing"!==t&&"lineHeight"!==t||(n=/^0?-\d?\.?\d?$/),"width"===t&&(a.stem[t]>1920||a.stem[t]<0))return a.stem.width=s._style.wordWrapWidth,void this.$message.error("输入数值超出范围 应为0-1920");if("fontSize"==t)if(0==a.stem[t]){if(s)return void(s.visible=!1)}else s&&(s.visible=!0);if("fontSize"==t){if(!n.test(a.stem[t]))return void this.$message({type:"error",message:"输入错误"});a.stem[t]>120&&(a.stem[t]=120,this.$message({type:"warning",message:"超过最大字体120"}))}"lineHeight"!=t&&"letterSpacing"!=t||(n.test(a.stem[t])?a.stem[t]=parseFloat(a.stem[t])?parseFloat(a.stem[t]).toFixed(0):"-":a.stem[t]=parseFloat(a.stem[t])?parseFloat(a.stem[t]).toFixed(0):0),"width"==t&&(a.stem[t]=this.verifyNumber(a.stem[t])),a.stem.color=a.stem.color?a.stem.color:"#000";var o=new PIXI.TextStyle({fontFamily:a.stem.fontFamily,fontSize:parseInt(a.stem.fontSize),wordWrap:!0,wordWrapWidth:parseInt(a.stem.width),breakWords:!0,lineHeight:parseInt(a.stem.lineHeight),letterSpacing:parseInt(a.stem.letterSpacing),align:a.stem.textAlign,fill:a.stem.color,width:a.stem.width,fontWeight:a.stem.strong?"bold":"",fontStyle:a.stem.italic?"italic":""});if(s){if("text"===t)return void s.setText(a.stem.text);s.setStyle(o),a.stem.show?s.visible=!0:s.visible=!1}else{var l=new g.Text(a.stem.text,o);new d.a(l,function(t,a){e.item.subTitle.stem.x=t.toFixed(1),e.item.subTitle.stem.y=a.toFixed(1)}),l.name="stemText",console.log(l),i.getChildByName("GAME"+this.index).getChildByName("STEMTITLE").children[0].addChild(l),a.stem.show?l.visible=!0:l.visible=!1}},setResource:function(t,e,a){if("subTitle"===e)if(this.gameData[t][e].audioShow){"bgImage"===e?"gameBg":"stem";var i=window.stage.getChildByName("GAME").getChildByName("GAME"+this.index).getChildByName("STEMTITLE").children[0].getChildByName("stemSound");i&&this.gameData[t][e].audio&&(i.visible=!0)}else{this.gameData[t][e].audio="",this.gameData[t][e].soundImg.animate_name="",this.gameData[t][e].soundImg.x&&(this.gameData[t][e].soundImg.x=0),this.gameData[t][e].soundImg.y&&(this.gameData[t][e].soundImg.y=0),this.gameData[t][e].soundImg.width&&(this.gameData[t][e].soundImg.width=0),this.gameData[t][e].soundImg.height&&(this.gameData[t][e].soundImg.height=0),this.gameData[t][e].soundImg.scale&&(this.gameData[t][e].soundImg.scale=1);var s=window.stage.getChildByName("GAME"),n=s.getChildByName("GAME"+this.index).getChildByName("STEMTITLE").children[0],o=s.getChildByName("GAME"+this.index).getChildByName("STEMTITLE").children[0].getChildByName("stemSound");o&&n.removeChild(o)}else if(this.gameData[t][e][a].show){var l="";l="bgImage"===e?"gameBg":"stem";var r=window.stage.getChildByName("GAME"),c=l+a.substring(0,1).toUpperCase()+a.substring(1),m=r.getChildByName("GAME"+t).children[0].getChildByName(l+"Container").getChildByName(c);m&&(m.visible=!0)}else{this.gameData[t][e][a].name="",this.gameData[t][e][a].x&&(this.gameData[t][e][a].x=0),this.gameData[t][e][a].y&&(this.gameData[t][e][a].y=0),this.gameData[t][e][a].width&&(this.gameData[t][e][a].width=0),this.gameData[t][e][a].height&&(this.gameData[t][e][a].height=0),this.gameData[t][e][a].scale&&(this.gameData[t][e][a].scale=1);var u="";u="bgImage"===e?"gameBg":"stem";var d=window.stage.getChildByName("GAME"),g=u+a.substring(0,1).toUpperCase()+a.substring(1),h=d.getChildByName("GAME"+t).children[0].getChildByName(u+"Container").getChildByName(g),p=d.getChildByName("GAME"+t).children[0].getChildByName(u+"Container");h&&p.removeChild(h)}},tabShow:function(t,e){var a=this,i=this.$refs[e+"Title"];this.tabShowStatus[t].child[e]?(this.tabShowStatus[t].child[e]=!1,i.className="el-icon-arrow-right"):(s()(this.tabShowStatus[t].child).forEach(function(e,i){a.tabShowStatus[t].child[e]=!1}),this.tabShowStatus[t].child[e]=!0,i.className="el-icon-arrow-down")},setGoldTextFontStyle:function(t,e){this.gameData[e].subTitle.stem[t]=!this.gameData[e].subTitle.stem[t];var a=this.item.subTitle,i=window.stage.getChildByName("GAME").getChildByName("GAME"+this.index).getChildByName("STEMTITLE").children[0].getChildByName("stemText");if(i){var s=new PIXI.TextStyle({fontFamily:a.stem.fontFamily,fontSize:parseInt(a.stem.fontSize),wordWrap:!0,wordWrapWidth:parseInt(a.stem.width),breakWords:!0,lineHeight:parseInt(a.stem.lineHeight),letterSpacing:parseInt(a.stem.letterSpacing),align:a.stem.textAlign,fill:a.stem.color,width:a.stem.width,fontWeight:a.stem.strong?"bold":"",fontStyle:a.stem.italic?"italic":""});i.setStyle(s)}},isFloat:function(t){return/^-?\d*\.\d+$/.test(t)},uploadImage:function(t,e,a){var i=this,s=a.target.files[0].name.split(".")[a.target.files[0].name.split(".").length-1];return-1===["jpg","png","JPG"].indexOf(s)?(this.$message({message:"上传类型不符",type:"error"}),void(a.target.value="")):0===a.target.files.length?(this.$message({message:"上传文件个数不符合",type:"warning"}),void(a.target.value="")):a.target.files[0].size/1024/1024>1?(this.$message({message:"上传文件大小在1M以内",type:"warning"}),void(a.target.value="")):void this.$http.post("/uploadingImage",{image:a.target.files[0]},{headers:{"Content-Type":"multipart/form-data"}}).then(function(s){i.gameData[t][e].image.name=s.resourceName,i.updateResourceData();var n="";n="bgImage"===e?"gameBg":"stem";var o=window.stage.getChildByName("GAME"),l=n+"Image".substring(0,1).toUpperCase()+"Image".substring(1),r=o.getChildByName("GAME"+t).children[0].getChildByName(n+"Container").getChildByName(l),c=o.getChildByName("GAME"+t).children[0].getChildByName(n+"Container");r?(PIXI.loader.add(s.resourceName,s.path),PIXI.loader.load(function(a,n){r.texture=new g.Texture.fromImage(n[s.resourceName].url),r.width=s.width,r.height=s.height,"bgImage"!==e&&new d.a(r,function(a,s){i.gameData[t][e].image.x=a.toFixed(1),i.gameData[t][e].image.y=s.toFixed(1)}),i.gameData[t][e].image.show?r.visible=!0:r.visible=!1})):(i.gameData[t][e].image.x=0,i.gameData[t][e].image.y=0,PIXI.loader.add(s.resourceName,s.path),PIXI.loader.load(function(a,n){(r=new g.Sprite.fromImage(n[s.resourceName].url)).name=l,r.x=0,r.y=0,r.width=s.width,r.height=s.height,c.addChild(r),"bgImage"!==e&&new d.a(r,function(a,s){i.gameData[t][e].image.x=a.toFixed(1),i.gameData[t][e].image.y=s.toFixed(1)}),i.gameData[t][e].image.show?r.visible=!0:r.visible=!1})),"bgImage"!==e&&(i.gameData[t][e].image.width=s.width,i.gameData[t][e].image.height=s.height),a.target.value=""})},verifySpriteFiles:function(t){var e=[],a=r()(t).map(function(t,e){return t.name}).map(function(t){return e.push(t.split(".")[1]),t.split(".")[0]}),i=e.sort(function(t,e){return t.length-e.length}).toString(),s=["png","json"].toString(),n=a[0];return a.every(function(t,e){return n===t})&&i===s},uploadSprite:function(t,e,a){var i=this;if(0===a.target.files.length||2!==a.target.files.length)return this.$message({message:"上传文件个数不符合",type:"warning"}),void(a.target.value="");if(!this.verifySpriteFiles(a.target.files))return this.$message({message:"上传文件不符合",type:"warning"}),void(a.target.value="");var s={};r()(a.target.files).forEach(function(t,e){s["sprite"+(e+1)]=t}),console.log(s),this.$http.post("/uploadingSprite",s,{headers:{"Content-Type":"multipart/form-data"}}).then(function(s){a.target.value="",i.gameData[t][e].sprite.name=s.resourceName;var n="",o=(n="bgImage"===e?"gameBg":"stem")+"Sprite",l=window.stage.getChildByName("GAME"),r=l.getChildByName("GAME"+t).children[0].getChildByName(n+"Container").getChildByName(o),c=l.getChildByName("GAME"+t).children[0].getChildByName(n+"Container");if(console.log(c),r){var m=r.x,u=r.y;c.removeChild(r),window.res.hasOwnProperty(s.resourceName)||PIXI.loader.add(s.resourceName,s.path),PIXI.loader.load(function(a,n){var l=n[s.resourceName].spritesheet,g=[];for(var h in l.textures)g.push(l.textures[h]);(r=new PIXI.extras.AnimatedSprite(g)).x=m,r.y=u,r.scale.set(i.gameData[t][e].sprite.scale),r.animationSpeed=1,r.play(),r.name=o,c.addChild(r),new d.a(r,function(a,s){i.gameData[t][e].sprite.x=a.toFixed(1),i.gameData[t][e].sprite.y=s.toFixed(1)}),i.gameData[t][e].sprite.show?r.visible=!0:r.visible=!1})}else i.gameData[t][e].sprite.x=0,i.gameData[t][e].sprite.y=0,window.res.hasOwnProperty(s.resourceName)||PIXI.loader.add(s.resourceName,s.path),PIXI.loader.load(function(a,n){var l=n[s.resourceName].spritesheet,m=[];for(var u in l.textures)m.push(l.textures[u]);(r=new PIXI.extras.AnimatedSprite(m)).x=0,r.y=0,r.scale.set(i.gameData[t][e].sprite.scale),r.animationSpeed=1,r.play(),r.name=o,c.addChild(r),new d.a(r,function(a,s){i.gameData[t][e].sprite.x=a.toFixed(1),i.gameData[t][e].sprite.y=s.toFixed(1)}),i.gameData[t][e].sprite.show?r.visible=!0:r.visible=!1})})},uploadAudio:function(t,e){var a=this,i=e.target.files[0].name.split(".")[e.target.files[0].name.split(".").length-1];return-1===["mp3","wav"].indexOf(i)?(this.$message({message:"上传类型不符",type:"error"}),void(e.target.value="")):0===e.target.files.length?(this.$message({message:"上传文件个数不符合",type:"warning"}),void(e.target.value="")):void this.$http.post("/uploadingAudio",{audio:e.target.files[0]},{headers:{"Content-Type":"multipart/form-data"}}).then(function(i){a.gameData[t].subTitle.audio=i.resourceName,e.target.value="";var s=window.stage.getChildByName("GAME").getChildByName("GAME"+a.index).getChildByName("STEMTITLE").children[0].getChildByName("stemSound");a.gameData[t].subTitle.audioShow&&a.gameData[t].subTitle.soundImg.animate_name?s&&(s.visible=!0):s&&(s.visible=!1)})},verifyAnimationFiles:function(t){var e=[],a=r()(t).map(function(t,e){return t.name}).map(function(t){return e.push(t.split(".")[1]),t.split(".")[0]}),i=e.sort(function(t,e){return t.length-e.length}).toString(),s=["png","json","atlas"].toString(),n=a[0];return a.every(function(t,e){return n===t})&&i===s},uploadAnimation:function(t,e,a){var i=this;if(0===a.target.files.length||3!==a.target.files.length)return this.$message({message:"上传文件个数不符合",type:"warning"}),void(a.target.value="");if(!this.verifyAnimationFiles(a.target.files))return this.$message({message:"上传文件不符合",type:"warning"}),void(a.target.value="");var s={};r()(a.target.files).forEach(function(t,e){s["animation"+(e+1)]=t}),this.$http.post("/uploadingAnimation",s,{headers:{"Content-Type":"multipart/form-data"}}).then(function(s){if(a.target.value="","soundImg"!==e){i.gameData[t][e].animate.name=s.resourceName;var n="",o=(n="bgImage"===e?"gameBg":"stem")+"Animate",l=window.stage.getChildByName("GAME"),r=l.getChildByName("GAME"+t).children[0].getChildByName(n+"Container").getChildByName(o),c=l.getChildByName("GAME"+t).children[0].getChildByName(n+"Container");if(r){var m=r.x,u=r.y;c.removeChild(r),window.res.hasOwnProperty(s.resourceName)||PIXI.loader.add(s.resourceName,s.path),PIXI.loader.load(function(a,n){(r=new PIXI.spine.Spine(n[s.resourceName].spineData)).x=m,r.y=u,r.scale.set(i.gameData[t][e].animate.scale),r.name=o,r.state.setAnimation(1,"animation",!1),c.addChild(r),new d.a(r,function(a,s){i.gameData[t][e].animate.x=a.toFixed(1),i.gameData[t][e].animate.y=s.toFixed(1)}),i.gameData[t][e].animate.show?r.visible=!0:r.visible=!1})}else{i.gameData[t][e].animate.x=0,i.gameData[t][e].animate.y=0;(new Date).getTime();window.res.hasOwnProperty(s.resourceName)||PIXI.loader.add(s.resourceName,s.path),PIXI.loader.load(function(a,n){(r=new PIXI.spine.Spine(n[s.resourceName].spineData)).x=0,r.y=0,r.scale.set(i.gameData[t][e].animate.scale),r.name=o,r.state.setAnimation(1,"animation",!1),c.addChild(r),new d.a(r,function(a,s){i.gameData[t][e].animate.x=a.toFixed(1),i.gameData[t][e].animate.y=s.toFixed(1)}),i.gameData[t][e].animate.show?r.visible=!0:r.visible=!1})}}else{i.gameData[t].subTitle[e].animate_name=s.resourceName,i.gameData[t].subTitle.soundImg.scale=1;var g=window.stage.getChildByName("GAME"),h=g.getChildByName("GAME"+i.index).getChildByName("STEMTITLE").children[0].getChildByName("stemSound"),p=g.getChildByName("GAME"+i.index).getChildByName("STEMTITLE").children[0];if(h){var v=h.x,f=h.y;p.removeChild(h),window.res.hasOwnProperty(s.resourceName)||PIXI.loader.add(s.resourceName,s.path),PIXI.loader.load(function(e,a){(h=new PIXI.spine.Spine(a[s.resourceName].spineData)).name="stemSound",h.state.setAnimation(1,"animation",!1),p.addChild(h),h.x=v,h.y=f,new d.a(h,function(e,a){i.gameData[t].subTitle.soundImg.x=e.toFixed(1),i.gameData[t].subTitle.soundImg.y=a.toFixed(1)}),i.gameData[t].subTitle.audioShow&&i.gameData[t].subTitle.audio?h.visible=!0:h.visible=!1})}else i.gameData[t].subTitle.soundImg.x=0,i.gameData[t].subTitle.soundImg.y=0,window.res.hasOwnProperty(s.resourceName)||PIXI.loader.add(s.resourceName,s.path),PIXI.loader.load(function(e,a){(h=new PIXI.spine.Spine(a[s.resourceName].spineData)).x=0,h.y=0,h.name="stemSound",h.state.setAnimation(1,"animation",!1),p.addChild(h),new d.a(h,function(e,a){i.gameData[t].subTitle.soundImg.x=e.toFixed(1),i.gameData[t].subTitle.soundImg.y=a.toFixed(1)}),i.gameData[t].subTitle.audioShow&&i.gameData[t].subTitle.audio?h.visible=!0:h.visible=!1})}a.target.value=""})},updateResourceData:function(){this.$emit("updateResourceData")},lockStatusData:function(t,e){if(t.image.show&&t.image.name){if(!t.image.width||!t.image.height)return void this.$message.error("绑定对象的宽高都不可为空");"true"===e.currentTarget.getAttribute("data-lock")?(e.currentTarget.setAttribute("data-lock","false"),t.image.ratio=0,t.image.lock=!1):(e.currentTarget.setAttribute("data-lock","true"),t.image.lock=!0,t.image.ratio=parseFloat(t.image.width)/parseFloat(t.image.height))}else this.$message({type:"warning",message:"舞台未绑定元素!"})}}},w={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"game-title"},[a("i",{ref:"bgImageTitle",class:t.tabShowStatus[t.index].child.bgImage?"el-icon-arrow-down":"el-icon-arrow-right",on:{click:function(e){return t.tabShow(t.index,"bgImage")}}}),t._v(" "),a("span",{on:{click:function(e){return t.tabShow(t.index,"bgImage")}}},[t._v("\n        背景图\n    ")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.tabShowStatus[t.index].child.bgImage,expression:"tabShowStatus[index].child.bgImage"}],staticClass:"game-inner"},[a("div",{staticClass:"edit-checkbox-title"},[a("el-checkbox",{attrs:{size:"small"},on:{change:function(e){return t.setResource(t.index,"bgImage","image")}},model:{value:t.item.bgImage.image.show,callback:function(e){t.$set(t.item.bgImage.image,"show",e)},expression:"item.bgImage.image.show"}},[t._v("图片\n            ")])],1),t._v(" "),a("div",{staticClass:"upload"},[a("div",{staticClass:"img-box"},[a("img",{attrs:{src:t.resourceData[t.item.bgImage.image.name],alt:"",width:"131",height:"96"}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改图片")]),t._v(" "),a("input",{attrs:{type:"file"},on:{change:function(e){return t.uploadImage(t.index,"bgImage",e)}}})])])]),t._v(" "),a("div",{staticClass:"edit-checkbox-title"},[a("el-checkbox",{attrs:{size:"small"},on:{change:function(e){return t.setResource(t.index,"bgImage","sprite")}},model:{value:t.item.bgImage.sprite.show,callback:function(e){t.$set(t.item.bgImage.sprite,"show",e)},expression:"item.bgImage.sprite.show"}},[t._v("精灵序列\n            ")])],1),t._v(" "),a("div",{staticClass:"upload"},[a("span",{staticClass:"file-title"},[t._v("\n                精灵文件：\n            ")]),t._v(" "),a("div",{staticClass:"animate-box"},[a("span",{domProps:{textContent:t._s(t.item.bgImage.sprite.name)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改文件")]),t._v(" "),a("input",{attrs:{type:"file",multiple:"multiple"},on:{change:function(e){return t.uploadSprite(t.index,"bgImage",e)}}})])])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus(t.index,"bgImage","sprite","x")}},model:{value:t.item.bgImage.sprite.x,callback:function(e){t.$set(t.item.bgImage.sprite,"x",e)},expression:"item.bgImage.sprite.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus(t.index,"bgImage","sprite","y")}},model:{value:t.item.bgImage.sprite.y,callback:function(e){t.$set(t.item.bgImage.sprite,"y",e)},expression:"item.bgImage.sprite.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus(t.index,"bgImage","sprite","scale")}},model:{value:t.item.bgImage.sprite.scale,callback:function(e){t.$set(t.item.bgImage.sprite,"scale",e)},expression:"item.bgImage.sprite.scale"}},[a("template",{slot:"prepend"},[t._v("Scale：")])],2),t._v(" "),a("div",{staticClass:"edit-switch"},[a("span",[t._v("loop")]),t._v(" "),a("el-switch",{attrs:{"active-color":"#77DC04","inactive-color":"#ff4949"},model:{value:t.item.bgImage.sprite.loop,callback:function(e){t.$set(t.item.bgImage.sprite,"loop",e)},expression:"item.bgImage.sprite.loop"}})],1),t._v(" "),a("div",{staticClass:"edit-checkbox-title"},[a("el-checkbox",{attrs:{size:"small"},on:{change:function(e){return t.setResource(t.index,"bgImage","animate")}},model:{value:t.item.bgImage.animate.show,callback:function(e){t.$set(t.item.bgImage.animate,"show",e)},expression:"item.bgImage.animate.show"}},[t._v("动画\n            ")])],1),t._v(" "),a("div",{staticClass:"upload"},[a("span",{staticClass:"file-title"},[t._v("动画文件：")]),t._v(" "),a("div",{staticClass:"animate-box"},[a("span",{domProps:{textContent:t._s(t.item.bgImage.animate.name)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改文件")]),t._v(" "),a("input",{attrs:{type:"file",multiple:"multiple"},on:{change:function(e){return t.uploadAnimation(t.index,"bgImage",e)}}})])])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus(t.index,"bgImage","animate","x")}},model:{value:t.item.bgImage.animate.x,callback:function(e){t.$set(t.item.bgImage.animate,"x",e)},expression:"item.bgImage.animate.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus(t.index,"bgImage","animate","y")}},model:{value:t.item.bgImage.animate.y,callback:function(e){t.$set(t.item.bgImage.animate,"y",e)},expression:"item.bgImage.animate.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus(t.index,"bgImage","animate","scale")}},model:{value:t.item.bgImage.animate.scale,callback:function(e){t.$set(t.item.bgImage.animate,"scale",e)},expression:"item.bgImage.animate.scale"}},[a("template",{slot:"prepend"},[t._v("Scale：")])],2),t._v(" "),a("div",{staticClass:"edit-switch"},[a("span",[t._v("loop")]),t._v(" "),a("el-switch",{attrs:{"active-color":"#77DC04","inactive-color":"#ff4949"},model:{value:t.item.bgImage.animate.loop,callback:function(e){t.$set(t.item.bgImage.animate,"loop",e)},expression:"item.bgImage.animate.loop"}})],1)],1),t._v(" "),a("div",{staticClass:"game-title"},[a("i",{ref:"stemImgTitle",class:t.tabShowStatus[t.index].child.stemImg?"el-icon-arrow-down":"el-icon-arrow-right",on:{click:function(e){return t.tabShow(t.index,"stemImg")}}}),t._v(" "),a("span",{on:{click:function(e){return t.tabShow(t.index,"stemImg")}}},[t._v("\n            题干\n        ")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.tabShowStatus[t.index].child.stemImg,expression:"tabShowStatus[index].child.stemImg"}],staticClass:"game-inner"},[a("div",{staticClass:"edit-checkbox-title"},[a("el-checkbox",{attrs:{size:"small"},on:{change:function(e){return t.setResource(t.index,"stemImg","image")}},model:{value:t.item.stemImg.image.show,callback:function(e){t.$set(t.item.stemImg.image,"show",e)},expression:"item.stemImg.image.show"}},[t._v("图片\n            ")])],1),t._v(" "),a("div",[a("div",{staticClass:"upload"},[a("div",{staticClass:"img-box"},[a("img",{attrs:{src:t.resourceData[t.item.stemImg.image.name],alt:"",width:"131",height:"96"}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改图片")]),t._v(" "),a("input",{attrs:{type:"file"},on:{change:function(e){return t.uploadImage(t.index,"stemImg",e)}}})])])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus(t.index,"stemImg","image","x")}},model:{value:t.item.stemImg.image.x,callback:function(e){t.$set(t.item.stemImg.image,"x",e)},expression:"item.stemImg.image.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus(t.index,"stemImg","image","y")}},model:{value:t.item.stemImg.image.y,callback:function(e){t.$set(t.item.stemImg.image,"y",e)},expression:"item.stemImg.image.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2),t._v(" "),a("div",{staticClass:"lockStatus"},[a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus(t.index,"stemImg","image","width",t.item.stemImg.image.ratio)}},model:{value:t.item.stemImg.image.width,callback:function(e){t.$set(t.item.stemImg.image,"width",e)},expression:"item.stemImg.image.width"}},[a("template",{slot:"prepend"},[t._v("W：")])],2),t._v(" "),a("span",{staticClass:"lock_block",attrs:{lockRatio:t.item.stemImg.image.ratio}},[a("img",{attrs:{src:t.item.stemImg.image.lock?t.lockImg:t.unLockImg,"data-lock":"false",alt:""},on:{click:function(e){return t.lockStatusData(t.item.stemImg,e)}}})]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus(t.index,"stemImg","image","height",t.item.stemImg.image.ratio)}},model:{value:t.item.stemImg.image.height,callback:function(e){t.$set(t.item.stemImg.image,"height",e)},expression:"item.stemImg.image.height"}},[a("template",{slot:"prepend"},[t._v("H：")])],2)],1)],1),t._v(" "),a("div",{staticClass:"edit-checkbox-title"},[a("el-checkbox",{attrs:{size:"small"},on:{change:function(e){return t.setResource(t.index,"stemImg","sprite")}},model:{value:t.item.stemImg.sprite.show,callback:function(e){t.$set(t.item.stemImg.sprite,"show",e)},expression:"item.stemImg.sprite.show"}},[t._v("精灵序列\n            ")])],1),t._v(" "),a("div",[a("div",{staticClass:"upload"},[a("span",{staticClass:"file-title"},[t._v("\n                精灵文件：\n            ")]),t._v(" "),a("div",{staticClass:"animate-box"},[a("span",{domProps:{textContent:t._s(t.item.stemImg.sprite.name)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改文件")]),t._v(" "),a("input",{attrs:{type:"file",multiple:"multiple"},on:{change:function(e){return t.uploadSprite(t.index,"stemImg",e)}}})])])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus(t.index,"stemImg","sprite","x")}},model:{value:t.item.stemImg.sprite.x,callback:function(e){t.$set(t.item.stemImg.sprite,"x",e)},expression:"item.stemImg.sprite.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus(t.index,"stemImg","sprite","y")}},model:{value:t.item.stemImg.sprite.y,callback:function(e){t.$set(t.item.stemImg.sprite,"y",e)},expression:"item.stemImg.sprite.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus(t.index,"stemImg","sprite","scale")}},model:{value:t.item.stemImg.sprite.scale,callback:function(e){t.$set(t.item.stemImg.sprite,"scale",e)},expression:"item.stemImg.sprite.scale"}},[a("template",{slot:"prepend"},[t._v("Scale：")])],2),t._v(" "),a("div",{staticClass:"edit-switch"},[a("span",[t._v("loop")]),t._v(" "),a("el-switch",{attrs:{"active-color":"#77DC04","inactive-color":"#ff4949"},model:{value:t.item.stemImg.sprite.loop,callback:function(e){t.$set(t.item.stemImg.sprite,"loop",e)},expression:"item.stemImg.sprite.loop"}})],1)],1),t._v(" "),a("div",{staticClass:"edit-checkbox-title"},[a("el-checkbox",{attrs:{size:"small"},on:{change:function(e){return t.setResource(t.index,"stemImg","animate")}},model:{value:t.item.stemImg.animate.show,callback:function(e){t.$set(t.item.stemImg.animate,"show",e)},expression:"item.stemImg.animate.show"}},[t._v("动画\n            ")])],1),t._v(" "),a("div",[a("div",{staticClass:"upload"},[a("span",{staticClass:"file-title"},[t._v("动画文件：")]),t._v(" "),a("div",{staticClass:"animate-box"},[a("span",{domProps:{textContent:t._s(t.item.stemImg.animate.name)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改文件")]),t._v(" "),a("input",{attrs:{type:"file",multiple:"multiple"},on:{change:function(e){return t.uploadAnimation(t.index,"stemImg",e)}}})])])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus(t.index,"stemImg","animate","x")}},model:{value:t.item.stemImg.animate.x,callback:function(e){t.$set(t.item.stemImg.animate,"x",e)},expression:"item.stemImg.animate.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus(t.index,"stemImg","animate","y")}},model:{value:t.item.stemImg.animate.y,callback:function(e){t.$set(t.item.stemImg.animate,"y",e)},expression:"item.stemImg.animate.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus(t.index,"stemImg","animate","scale")}},model:{value:t.item.stemImg.animate.scale,callback:function(e){t.$set(t.item.stemImg.animate,"scale",e)},expression:"item.stemImg.animate.scale"}},[a("template",{slot:"prepend"},[t._v("Scale：")])],2),t._v(" "),a("div",{staticClass:"edit-switch"},[a("span",[t._v("loop")]),t._v(" "),a("el-switch",{attrs:{"active-color":"#77DC04","inactive-color":"#ff4949"},model:{value:t.item.stemImg.animate.loop,callback:function(e){t.$set(t.item.stemImg.animate,"loop",e)},expression:"item.stemImg.animate.loop"}})],1)],1),t._v(" "),a("div",{staticClass:"edit-checkbox-title"},[a("el-checkbox",{attrs:{size:"small"},on:{change:function(e){return t.setResource(t.index,"subTitle","audio")}},model:{value:t.item.subTitle.audioShow,callback:function(e){t.$set(t.item.subTitle,"audioShow",e)},expression:"item.subTitle.audioShow"}},[t._v("音频\n            ")])],1),t._v(" "),a("div",[a("div",{staticClass:"upload"},[a("span",{staticClass:"file-title"},[t._v("音频文件：")]),t._v(" "),a("div",{staticClass:"animate-box"},[a("span",{domProps:{textContent:t._s(t.item.subTitle.audio)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改文件")]),t._v(" "),a("input",{attrs:{type:"file"},on:{change:function(e){return t.uploadAudio(t.index,e)}}})])])]),t._v(" "),a("div",{staticClass:"edit-range-audio"},[a("span",[t._v("音量：")]),t._v(" "),a("el-slider",{attrs:{min:Number(0),max:Number(1),step:Number(.1)},model:{value:t.item.subTitle.audio_volume,callback:function(e){t.$set(t.item.subTitle,"audio_volume",e)},expression:"item.subTitle.audio_volume"}})],1),t._v(" "),a("div",{staticClass:"upload"},[a("span",{staticClass:"file-title"},[t._v("图标动画")]),t._v(" "),a("div",{staticClass:"animate-box"},[a("span",{domProps:{textContent:t._s(t.item.subTitle.soundImg.animate_name)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改文件")]),t._v(" "),a("input",{attrs:{type:"file",multiple:"multiple"},on:{change:function(e){return t.uploadAnimation(t.index,"soundImg",e)}}})])])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setSubTitileAttr("soundImg","x")}},model:{value:t.item.subTitle.soundImg.x,callback:function(e){t.$set(t.item.subTitle.soundImg,"x",e)},expression:"item.subTitle.soundImg.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setSubTitileAttr("soundImg","y")}},model:{value:t.item.subTitle.soundImg.y,callback:function(e){t.$set(t.item.subTitle.soundImg,"y",e)},expression:"item.subTitle.soundImg.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2)],1),t._v(" "),a("div",{staticClass:"edit-checkbox-title"},[a("el-checkbox",{attrs:{size:"small"},on:{change:function(e){return t.setStemTextStatus(t.item.subTitle.stem.show)}},model:{value:t.item.subTitle.stem.show,callback:function(e){t.$set(t.item.subTitle.stem,"show",e)},expression:"item.subTitle.stem.show"}},[t._v("题干文字")])],1),t._v(" "),a("div",[a("div",{staticClass:"edit-textarea"},[a("span",[t._v("内容：")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.item.subTitle.stem.text,expression:"item.subTitle.stem.text"}],attrs:{name:"",id:"",cols:"30",rows:"10",placeholder:"请输入文字"},domProps:{value:t.item.subTitle.stem.text},on:{input:[function(e){e.target.composing||t.$set(t.item.subTitle.stem,"text",e.target.value)},function(e){return t.setStemText("text")}]}})]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setStemText("width")}},model:{value:t.item.subTitle.stem.width,callback:function(e){t.$set(t.item.subTitle.stem,"width",e)},expression:"item.subTitle.stem.width"}},[a("template",{slot:"prepend"},[t._v("段落宽度：")])],2),t._v(" "),a("div",{staticClass:"edit-select"},[a("span",[t._v("字体：")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择",size:"mini"},on:{change:function(e){return t.setStemText("fontFamily")}},model:{value:t.item.subTitle.stem.fontFamily,callback:function(e){t.$set(t.item.subTitle.stem,"fontFamily",e)},expression:"item.subTitle.stem.fontFamily"}},t._l(t.fontFamily,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",maxlength:"3",size:"mini"},nativeOn:{input:function(e){return t.setStemText("fontSize")}},model:{value:t.item.subTitle.stem.fontSize,callback:function(e){t.$set(t.item.subTitle.stem,"fontSize",e)},expression:"item.subTitle.stem.fontSize"}},[a("template",{slot:"prepend"},[t._v("字号：")])],2),t._v(" "),a("div",{staticClass:"edit-select"},[a("span",[t._v("对齐：")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择",size:"mini"},on:{change:function(e){return t.setStemText("textAlign")}},model:{value:t.item.subTitle.stem.textAlign,callback:function(e){t.$set(t.item.subTitle.stem,"textAlign",e)},expression:"item.subTitle.stem.textAlign"}},t._l(t.textAlign,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",maxlength:"3",size:"mini"},nativeOn:{input:function(e){return t.setStemText("letterSpacing")}},model:{value:t.item.subTitle.stem.letterSpacing,callback:function(e){t.$set(t.item.subTitle.stem,"letterSpacing",e)},expression:"item.subTitle.stem.letterSpacing"}},[a("template",{slot:"prepend"},[t._v("字间距：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",maxlength:"3",size:"mini"},nativeOn:{input:function(e){return t.setStemText("lineHeight")}},model:{value:t.item.subTitle.stem.lineHeight,callback:function(e){t.$set(t.item.subTitle.stem,"lineHeight",e)},expression:"item.subTitle.stem.lineHeight"}},[a("template",{slot:"prepend"},[t._v("行间距：")])],2),t._v(" "),a("div",{staticClass:"edit-select"},[a("span",[t._v("颜色：")]),t._v(" "),a("el-color-picker",{on:{change:function(e){return t.setStemText("color")}},model:{value:t.item.subTitle.stem.color,callback:function(e){t.$set(t.item.subTitle.stem,"color",e)},expression:"item.subTitle.stem.color"}})],1),t._v(" "),a("div",{staticClass:"font-style"},[a("span",{class:t.item.subTitle.stem.strong?"font-style-color":"",on:{click:function(e){return t.setGoldTextFontStyle("strong",t.index)}}},[t._v("B\n            ")]),t._v(" "),a("span",{class:t.item.subTitle.stem.italic?"font-style-color":"",on:{click:function(e){return t.setGoldTextFontStyle("italic",t.index)}}},[t._v("I\n            ")])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setSubTitileAttr("stem","x")}},model:{value:t.item.subTitle.stem.x,callback:function(e){t.$set(t.item.subTitle.stem,"x",e)},expression:"item.subTitle.stem.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setSubTitileAttr("stem","y")}},model:{value:t.item.subTitle.stem.y,callback:function(e){t.$set(t.item.subTitle.stem,"y",e)},expression:"item.subTitle.stem.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2)],1)])])},staticRenderFns:[]};var b=a("C7Lr")(f,w,!1,function(t){a("OM2L")},"data-v-c5809ce8",null).exports,x=a("Tfbs"),y={name:"EditGamePrivate",data:function(){return{lockImg:this.resourceData.image_lock_on,unLockImg:this.resourceData.image_lock_off,checkbox:!1,radio:1,switchStatus:!1,audio_name:"",image:{show:!0,x:0,y:0,lock:!1,width:0,height:0,name:"",ratio:0},sprite:{show:!1,x:"500",y:"0",name:"",scale:"1",loop:!1},animate:{show:!1,x:"100",y:"100",name:"",scale:"3",loop:!0},fishs:[],rightAnswers:[],success_action:null,off:!0,fish_text:null,fontFamily:[{label:"微软雅黑",value:"Microsoft YaHei"},{label:"宋体",value:"SimSun"},{label:"黑体",value:"SimHei"}],fontSize:[{label:"16px",value:16},{label:"18px",value:18},{label:"20px",value:20},{label:"22px",value:22},{label:"24px",value:24},{label:"26px",value:26},{label:"30px",value:30},{label:"36px",value:36},{label:"40px",value:40},{label:"48px",value:48},{label:"50px",value:50},{label:"52px",value:52},{label:"54px",value:54}]}},props:["allData","gameData","resourceData","item","index","tabShowStatus"],created:function(){this.fishs=this.gameData[this.index].option,this.rightAnswers=this.gameData[this.index].rightAnswer,this.success_action=this.gameData[this.index].success_animate,this.fish_text=this.gameData[this.index].textStyle},mounted:function(){},methods:{verifyNumber:function(t){return isNaN(t)&&(t=0),t=parseFloat(t)>=0?function(t){return/^-?\d*\.\d+$/.test(t)}(parseFloat(t))?parseFloat(t.split(".")[0]+"."+t.split(".")[1].substr(0,1)):/^\d*\.+$/g.test(t)?parseFloat(t)+".":t?parseFloat(t):0:0},setElemented:function(t,e,a,i,s,n,o){var l,r=stage.getChildByName("GAME").getChildByName("GAME"+this.index).getChildByName("componentContainer").getChildByName(e),c=this.item.rightAnswer[o];if(r)if("scale"===a)l=c[a],/^-?\d*\.\d+$/.test(l)&&(c[a]=parseFloat(c[a]).toFixed(1)),r[a].set(c[a]);else{if(("x"===a||"width"===a)&&c[a]>1920)return c[a]=parseFloat(r[a]).toFixed(0),this.$message.error("输入数值超出范围 应为0-1920"),!1;if(("y"===a||"height"===a)&&c[a]>1080)return c[a]=parseFloat(r[a]).toFixed(0),this.$message.error("输入数值超出范围 应为0-1920"),!1;"x"!==a&&"y"!==a&&"width"!==a&&"height"!==a||(c[a]=this.verifyNumber(c[a]),r[a]=c[a]),"width"===a&&(console.log(c.lock),c.lock&&i&&(c.height=(i/s).toFixed(0),r.height=c.height)),"height"===a&&c.lock&&i&&(c.width=(i*s).toFixed(0),r.width=c.width)}},setColor:function(t,e){stage.getChildByName("GAME").getChildByName("GAME"+t).getChildByName("componentContainer").children.map(function(t,a){-1!=String(t.name).indexOf("option")&&(t.getChildByName("paopao").children[0].style.fill=e)})},setSize:function(t,e){stage.getChildByName("GAME").getChildByName("GAME"+t).getChildByName("componentContainer").children.map(function(t,a){-1!=String(t.name).indexOf("option")&&(t.getChildByName("paopao").children[0].style.fontSize=e)})},setFamily:function(t,e){stage.getChildByName("GAME").getChildByName("GAME"+t).getChildByName("componentContainer").children.map(function(t,a){-1!=String(t.name).indexOf("option")&&(t.getChildByName("paopao").children[0].style.fontFamily=e)})},uploadAnimation_success:function(t,e,a){var i=this;if(0!==a.target.files.length){var s={};r()(a.target.files).forEach(function(t,e){s["animation"+(e+1)]=t}),this.$http.post("/uploadingAnimation",s,{headers:{"Content-Type":"multipart/form-data"}}).then(function(a){i.gameData[t][e].name=a.resourceName})}else this.$message({message:"上传文件个数不符合",type:"warning"})},tabShow_child2:function(){var t=this.$refs.success_an,e=this.$refs.success_out;"true"==t.getAttribute("data-off")?(t.className="el-icon-arrow-right",e.style.display="none",t.setAttribute("data-off","false")):(t.className="el-icon-arrow-down",e.style.display="block",t.setAttribute("data-off","true"))},lockStatusData:function(t,e){if(t.show&&t.name){if(!t.width||!t.height)return void this.$message.error("绑定对象的宽高都不可为空");"true"===e.currentTarget.getAttribute("data-lock")?(e.currentTarget.setAttribute("data-lock","false"),t.ratio=0,t.lock=!1):(e.currentTarget.setAttribute("data-lock","true"),t.lock=!0,t.ratio=parseFloat(t.width)/parseFloat(t.height))}else this.$message({type:"warning",message:"舞台未绑定元素!"})},lockStatusData1:function(t,e){if(t.animate.name){if(!t.animate.width||!t.animate.height)return void this.$message.error("绑定对象的宽高都不可为空");"true"===e.currentTarget.getAttribute("data-lock")?(e.currentTarget.setAttribute("data-lock","false"),t.animate.ratio=0,t.animate.lock=!1):(e.currentTarget.setAttribute("data-lock","true"),t.animate.lock=!0,t.animate.ratio=parseFloat(t.animate.width)/parseFloat(t.animate.height))}else this.$message({type:"warning",message:"舞台未绑定元素!"})},setElementStatus2:function(t,e,a,i,s){var n,o=a;console.log(o,e),"scale"===e?(n=o[e],/^-?\d*\.\d+$/.test(n)&&(o[e]=parseFloat(o[e]).toFixed(1))):("x"!==e&&"y"!==e&&"width"!==e&&"height"!==e||(o[e]=this.verifyNumber(o[e])),"width"===e&&(console.log(o.lock),o.lock&&(o.height=(i/s).toFixed(0))),"height"===e&&o.lock&&(o.width=(i*s).toFixed(0)))},setElementStatus1:function(t,e,a,i,s,n){var o,l=this.item.rightAnswer[s].animate;console.log(l,e),"scale"===e?(o=l[e],/^-?\d*\.\d+$/.test(o)&&(l[e]=parseFloat(l[e]).toFixed(1))):("x"!==e&&"y"!==e&&"width"!==e&&"height"!==e||(l[e]=this.verifyNumber(l[e])),"width"===e&&(console.log(l.lock),l.lock&&(l.height=(i/n).toFixed(0))),"height"===e&&l.lock&&(l.width=(i*n).toFixed(0)))},setElementStatus:function(t,e,a,i,s){var n=/[a-zA-Z]/g,o=stage.getChildByName("GAME").getChildByName("GAME"+t).getChildByName("componentContainer");if(o&&o.getChildByName(e))switch(a){case"left":if(console.log(s),parseFloat(s)<0||parseFloat(s)>1920){this.$message({type:"error",message:"输入数值超出范围，应为0-1920"});break}this.isFloat(s)&&(console.log("ddd"),i.x=parseFloat(s.split(".")[0]+"."+s.split(".")[1].substr(0,1))),n.test(s)&&(i.x=parseFloat(s.replace(/\s/g,"").replace(/[a-zA-Z]/g,"").toLowerCase()).toFixed(1)),o.getChildByName(e).x=i.x;break;case"top":if(parseFloat(s)<0||parseFloat(s)>1080){this.$message({type:"error",message:"输入数值超出范围，应为0-1920"}),i.y=parseFloat(s).toFixed(1);break}this.isFloat(s)&&(i.y=parseFloat(s.split(".")[0]+"."+s.split(".")[1].substr(0,1))),n.test(s)&&(i.y=parseFloat(s.replace(/\s/g,"").replace(/[a-zA-Z]/g,"").toLowerCase()).toFixed(1)),o.getChildByName(e).y=i.y;break;case"width":if(parseFloat(s)<0||parseFloat(s)>1920){this.$message({type:"error",message:"输入数值超出范围，应为0-1920"}),i.width=parseFloat(s).toFixed(1);break}this.isFloat(s)&&(i.width=parseFloat(s.split(".")[0]+"."+s.split(".")[1].substr(0,1))),n.test(s)&&(i.width=parseFloat(s.replace(/\s/g,"").replace(/[a-zA-Z]/g,"").toLowerCase()).toFixed(1)),o.getChildByName(e).width=i.width,i.radio&&(o.getChildByName(e).height=(parseFloat(s)/i.radio).toFixed(1)),s&&i.radio&&(i.height=(parseFloat(s)/i.radio).toFixed(1));break;case"height":if(parseFloat(s)<0||parseFloat(s)>1080){this.$message({type:"error",message:"输入数值超出范围，应为0-1080"}),i.height=parseFloat(s).toFixed(1);break}this.isFloat(s)&&(i.height=parseFloat(s.split(".")[0]+"."+s.split(".")[1].substr(0,1))),n.test(s)&&(i.height=parseFloat(s.replace(/\s/g,"").replace(/[a-zA-Z]/g,"").toLowerCase()).toFixed(1)),o.getChildByName(e).height=i.height,i.radio&&(o.getChildByName(e).width=(parseFloat(s)*i.radio).toFixed(1)),s&&i.radio&&(i.width=(parseFloat(s)*i.radio).toFixed(1));break;case"scale":this.isFloat(s)&&(i.scale=parseFloat(s).toFixed(1),o.getChildByName(e).scale.set(i.scale));break;case"text":var l=""==s?"":s,r=(o.getChildByName(e).getChildByName("paopao").children[0].width,o.getChildByName(e).getChildByName("paopao").children[0].height,o.getChildByName(e).getChildByName("paopao").width,o.getChildByName(e).getChildByName("paopao").height,o.getChildByName(e).getChildByName("paopao"));o.getChildByName(e).getChildByName("paopao").children[0].text=l,l.length<=2&&(o.getChildByName(e).getChildByName("paopao").children[0].style.fontSize="48px",r.scale.set(1,1),i.qipao_scale=1,i.qipao_text=48),l.length>=3&&(o.getChildByName(e).getChildByName("paopao").children[0].style.fontSize="24px",r.scale.set(1.5,1.5),i.qipao_scale=1.5,i.qipao_text=24),console.log("lllllllll",l.length,i)}},isFloat:function(t){return/^-?\d*\.\d+$/.test(t)},setElement:function(t,e,a,i,s){var n=stage.getChildByName("GAME").getChildByName("GAME"+t).getChildByName("componentContainer").getChildByName(e);console.log("x"===a);if(console.log(s),/[a-z]/i.test(i[a])&&(i[a]=i[a]?parseFloat(i[a]).toFixed(1):0),"scale"===a)this.isFloat(i[a])&&(i[a]=parseFloat(i[a]).toFixed(1)),n[a].set(i[a]);else{if("x"===a&&(i[a]>1920||i[a]<0))return i[a]=n[a],void this.$message.error("输入数值超出范围 应为0-1920");if("y"===a&&(i[a]>1080||i[a]<0))return i[a]=n[a],void this.$message.error("输入数值超出范围 应为0-1080");if("width"===a){if(i[a]>1920||i[a]<0)return i[a]=n[a],void this.$message.error("输入数值超出范围 应为0-1920");n.width=""==i.width?0:parseFloat(i.width).toFixed(1),i.radio&&(n.height=(parseFloat(i.width)/i.radio).toFixed(1)),i[a]&&i.radio&&(i.height=(parseFloat(i.width)/i.radio).toFixed(1))}else if("height"===a){if(i[a]>1080||i[a]<0)return i[a]=n[a],void this.$message.error("输入数值超出范围 应为0-1080");n.height=""==i.height?0:parseFloat(i.height).toFixed(1),i.radio&&(n.width=(parseFloat(i.height)*i.radio).toFixed(1)),i[a]&&i.radio&&(i.width=(parseFloat(i.height)*i.radio).toFixed(1))}if(0==i.radio||"width"!==a&&"height"!==a){this.isFloat(i[a])&&(i[a]=parseFloat(i[a].split(".")[0]+"."+i[a].split(".")[1].substr(0,1))),("x"==a||"y"==a)&&i[a]<0&&(i[a]=n[a]);i[a]&&/^\d*\.+$/g.test(i[a])?i[a]=parseFloat(i[a])+".":i[a]=i[a]?parseFloat(i[a]):0,n[a]=parseInt(i[a])}else this.isFloat(i[a])&&(i[a]=parseFloat(i[a]).toFixed(1))}},uploadAnimation1:function(t,e,a,i){var s=this;if(0!==a.target.files.length){var n={};r()(a.target.files).forEach(function(t,e){n["animation"+(e+1)]=t}),this.$http.post("/uploadingAnimation",n,{headers:{"Content-Type":"multipart/form-data"}}).then(function(a){s.gameData[t][e][i].animate.name=a.resourceName})}else this.$message({message:"上传文件个数不符合",type:"warning"})},tabShow_child1:function(t){var e=this.$refs.yulous[t],a=this.$refs.yulou_item[t];"true"==e.getAttribute("data-off")?(e.className="el-icon-arrow-right",a.style.display="none",e.setAttribute("data-off","false")):(e.className="el-icon-arrow-down",a.style.display="block",e.setAttribute("data-off","true"))},changeArr1:function(t,e){var a=this;if("add"===t){var i=JSON.parse(m()(this.rightAnswers[0]));!function t(e){r()(e).forEach(function(a,i){"object"===(void 0===a?"undefined":o()(a))?t(a):"boolean"==typeof a?e[s()(e)[i]]=!1:"string"==typeof a?e[s()(e)[i]]="":"number"==typeof a&&(e[s()(e)[i]]=0)})}(i),i.width=0,i.height=0,i.x=0,i.y=0,i.lockImg="image_lock_off",this.gameData[this.index].rightAnswer.push(i),this.$nextTick(function(){})}else if("copy"===t){var n=JSON.parse(m()(this.gameData[this.index].rightAnswer[e]));n.x=0,n.y=0,this.gameData[this.index].rightAnswer.push(n),this.gameData[this.index].rightAnswer.forEach(function(t,e){t.componentName="rightAnswer"+e}),Object(x.RenderElementByIndex)(this.index,this.allData)}else"del"===t&&(this.gameData[this.index].rightAnswer.length>1?this.$confirm("此操作将删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$message({type:"success",message:"删除成功!"}),a.gameData[a.index].rightAnswer.splice(e,1),a.gameData[a.index].rightAnswer.forEach(function(t,e){t.componentName="rightAnswer"+e}),Object(x.RenderElementByIndex)(a.index,a.allData)}).catch(function(){a.$message({type:"info",message:"已取消删除"})}):alert("就剩一个鱼篓了"))},tabShow_child3:function(){var t=this.$refs.text_title,e=this.$refs.text_out;"true"==t.getAttribute("data-off")?(t.className="el-icon-arrow-right",e.style.display="none",t.setAttribute("data-off","false")):(t.className="el-icon-arrow-down",e.style.display="block",t.setAttribute("data-off","true"))},setImageLock:function(){this.image.lock=!this.image.lock,this.image.height&&this.image.width?this.image.lock&&(this.image.ratio=this.image.width/this.image.height):this.$message({message:"X或Y为0或为空 无法计算比例",type:"warning"})},setAttr:function(t,e){this.image.ratio>0&&("width"===e||"height"===e)&&this.image.lock&&("width"===e?(console.log(this.image.width,this.image.ratio),this.image.height=this.image.width/this.image.ratio):"height"===e&&(this.image.width=this.image.height*this.image.ratio))},tabShow:function(t,e){var a=this,i=this.$refs[e+"Title"];this.tabShowStatus[t].child[e]?(this.tabShowStatus[t].child[e]=!1,i.className="el-icon-arrow-right"):(s()(this.tabShowStatus[t].child).forEach(function(e,i){a.tabShowStatus[t].child[e]=!1}),this.tabShowStatus[t].child[e]=!0,i.className="el-icon-arrow-down")},verifyAnimationFiles:function(t){var e=[],a=r()(t).map(function(t,e){return t.name}).map(function(t){return e.push(t.split(".")[1]),t.split(".")[0]}),i=e.sort(function(t,e){return t.length-e.length}).toString(),s=["png","json","atlas"].toString(),n=a[0];return a.every(function(t,e){return n===t})&&i===s},verifySpriteFiles:function(t){var e=[],a=r()(t).map(function(t,e){return t.name}).map(function(t){return e.push(t.split(".")[1]),t.split(".")[0]}),i=e.sort(function(t,e){return t.length-e.length}).toString(),s=["png","json"].toString(),n=a[0];return a.every(function(t,e){return n===t})&&i===s},uploadImage:function(t,e,a,i){var s=this,n=i.target.files[0].name.split(".")[i.target.files[0].name.split(".").length-1];-1!==["jpg","png"].indexOf(n)?0!==i.target.files.length?this.$http.post("/uploadingImage",{image:i.target.files[0],render:!0},{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){"rightAnswer"===e&&(s.gameData[s.index].rightAnswer[a].name=t.resourceName,s.gameData[s.index].rightAnswer[a].componentName=e+a,s.gameData[s.index].rightAnswer[a].width=t.width,s.gameData[s.index].rightAnswer[a].height=t.height,!s.gameData[s.index].rightAnswer[a].x&&(s.gameData[s.index].rightAnswer[a].x=0),!s.gameData[s.index].rightAnswer[a].y&&(s.gameData[s.index].rightAnswer[a].y=0),Object(x.UploadAndRenderEle)(s.index,e+a,t,s.allData,"","","","")),i.target.value="",s.updateResourceData()}):this.$message({message:"上传文件个数不符合",type:"warning"}):this.$message({message:"上传类型不符",type:"error"})},uploadAnimation:function(t,e,a,i){var s=this;if(0!==a.target.files.length&&3===a.target.files.length)if(this.verifyAnimationFiles(a.target.files)){var n={};r()(a.target.files).forEach(function(t,e){n["animation"+(e+1)]=t}),this.$http.post("/uploadingAnimation",n,{headers:{"Content-Type":"multipart/form-data"}}).then(function(n){if("option"===e){s.gameData[t][e][i].name=n.resourceName;var o=s.gameData[t][e][i].text,l=s.gameData[t][e][i].text_bg?s.gameData[t][e][i].text_bg:"image_pao_img",r=s.gameData[t][e][i].qipao_scale?s.gameData[t][e][i].qipao_scale:1,c=s.gameData[t][e][i].qipao_text?s.gameData[t][e][i].qipao_text:48;Object(x.UploadAndRenderEle)(s.index,e+i,n,s.allData,o,l,r,c)}a.target.value="",s.updateResourceData()})}else this.$message({message:"上传文件不符合",type:"warning"});else this.$message({message:"上传文件个数不符合",type:"warning"})},uploadSprite:function(t,e){var a=this;if(0!==e.target.files.length&&2===e.target.files.length)if(this.verifySpriteFiles(e.target.files)){var i={};r()(e.target.files).forEach(function(t,e){i["sprite"+(e+1)]=t}),console.log(i),this.$http.post("/uploadingSprite",i,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){a.sprite.name=t.resourceName,e.target.value=""})}else this.$message({message:"上传文件不符合",type:"warning"});else this.$message({message:"上传文件个数不符合",type:"warning"})},uploadAudio:function(t,e,a,i){var s=this,n=a.target.files[0].name.split(".")[a.target.files[0].name.split(".").length-1];-1!==["mp3","wav"].indexOf(n)?0!==a.target.files.length?this.$http.post("/uploadingAudio",{audio:a.target.files[0]},{headers:{"Content-Type":"multipart/form-data"}}).then(function(n){s.gameData[t][e][i].audio=n.resourceName,a.target.value=""}):this.$message({message:"上传文件个数不符合",type:"warning"}):this.$message({message:"上传类型不符",type:"error"})},updateResourceData:function(){this.$emit("updateResourceData")},tabShow_child:function(t){var e=this.$refs.fishs[t],a=this.$refs.fish_item[t];"true"==e.getAttribute("data-off")?(e.className="el-icon-arrow-right",a.style.display="none",e.setAttribute("data-off","false")):(e.className="el-icon-arrow-down",a.style.display="block",e.setAttribute("data-off","true"))},changeArr:function(t,e){var a=this;if("add"===t){var i=JSON.parse(m()(this.fishs[0]));!function t(e){r()(e).forEach(function(a,i){"object"===(void 0===a?"undefined":o()(a))?t(a):"boolean"==typeof a?e[s()(e)[i]]=!1:"string"==typeof a?e[s()(e)[i]]="":"number"==typeof a&&(e[s()(e)[i]]=0)})}(i),i.audio=this.fishs[0].audio,i.text_bg=this.fishs[0].text_bg,i.text="",i.x=0,i.y=0,this.gameData[this.index].option.push(i),this.gameData[this.index].option.forEach(function(t,e){t.componentName="option"+e}),this.$nextTick(function(){})}else if("copy"===t){var n=JSON.parse(m()(this.gameData[this.index].option[e]));n.x=0,n.y=0,this.gameData[this.index].option.push(n),this.gameData[this.index].option.forEach(function(t,e){t.componentName="option"+e}),Object(x.RenderElementByIndex)(this.index,this.allData)}else"del"===t&&(this.gameData[this.index].option.length>1?this.$confirm("此操作将删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$message({type:"success",message:"删除成功!"}),a.gameData[a.index].option.splice(e,1),a.gameData[a.index].option.forEach(function(t,e){t.componentName="option"+e}),Object(x.RenderElementByIndex)(a.index,a.allData)}).catch(function(){a.$message({type:"info",message:"已取消删除"})}):alert("就剩一条小鱼了"))}}},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"game-title"},[a("i",{ref:"option1Title",class:t.tabShowStatus[t.index].child.option1?"el-icon-arrow-down":"el-icon-arrow-right",on:{click:function(e){return t.tabShow(t.index,"option1")}}}),t._v(" "),a("span",{on:{click:function(e){return t.tabShow(t.index,"option1")}}},[t._v("\n        小鱼配置\n        ")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.tabShowStatus[t.index].child.option1,expression:"tabShowStatus[index].child.option1"}],staticClass:"game-inner"},[a("div",{ref:"gamContent",staticClass:"gam-content"},t._l(t.fishs,function(e,i){return a("div",{staticClass:"fish_out"},[a("div",{staticClass:"game-title",staticStyle:{"margin-top":"15px"}},[a("i",{ref:"fishs",refInFor:!0,class:e?"el-icon-arrow-down":"el-icon-arrow-right",attrs:{"data-off":!0},on:{click:function(e){return t.tabShow_child(i)}}}),t._v(" "),a("span",{on:{click:function(e){return t.tabShow_child(i)}}},[t._v("小鱼配置")]),t._v(" "),a("i",{staticClass:"game-title-icon el-icon-delete",on:{click:function(e){return t.changeArr("del",i)}}}),t._v(" "),a("i",{staticClass:"game-title-icon el-icon-tickets",on:{click:function(e){return t.changeArr("copy",i)}}}),t._v(" "),a("i",{staticClass:"game-title-icon el-icon-plus",on:{click:function(e){return t.changeArr("add",i)}}})]),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),a("div",{ref:"fish_item",refInFor:!0,staticClass:"fish_item"},[a("el-input",{attrs:{placeholder:"请输入内容",size:"mini",maxlength:"5"},on:{input:function(a){return t.setElementStatus(t.index,"option"+i,"text",e,a)}},model:{value:e.text,callback:function(a){t.$set(e,"text",a)},expression:"optitem.text"}},[a("template",{slot:"prepend"},[a("b",[t._v("文字 :")])])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入0到1之间的小数",size:"mini",maxlength:"5"},on:{input:function(a){return t.setElementStatus(t.index,"option"+i,"scale",e,a)}},model:{value:e.scale,callback:function(a){t.$set(e,"scale",a)},expression:"optitem.scale"}},[a("template",{slot:"prepend"},[a("b",[t._v("scale :")])])],2),t._v(" "),a("div",{staticClass:"upload"},[a("div",{staticClass:"animate-box"},[a("span",{domProps:{textContent:t._s(e.name)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改动画")]),t._v(" "),a("input",{attrs:{type:"file",multiple:"multiple"},on:{change:function(e){return t.uploadAnimation(t.index,"option",e,i)}}})])])]),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),a("p",{staticClass:"file-title",staticStyle:{"margin-top":"0px","margin-bottom":"0px"}},[t._v("音频文件")]),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),a("div",{staticClass:"upload"},[a("div",{staticClass:"animate-box"},[a("span",{domProps:{textContent:t._s(e.audio)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改音频")]),t._v(" "),a("input",{attrs:{type:"file",multiple:"multiple"},on:{change:function(e){return t.uploadAudio(t.index,"option",e,i)}}})])])]),t._v(" "),a("div",{staticStyle:{clear:"both"}})],1)])}),0),t._v(" "),a("div",{staticClass:"game-title",staticStyle:{"margin-top":"15px"}},[a("i",{ref:"text_title",staticClass:"el-icon-arrow-down",attrs:{"data-off":!0},on:{click:function(e){return t.tabShow_child3()}}}),t._v(" "),a("span",{on:{click:function(e){return t.tabShow_child3()}}},[t._v("文字配置")])]),t._v(" "),a("div",{ref:"text_out",staticClass:"fish_text"},[a("div",{staticClass:"edit-select"},[a("span",[t._v("字体 :")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择",size:"mini"},on:{input:function(e){return t.setFamily(t.index,t.fish_text.fontFamily)}},model:{value:t.fish_text.fontFamily,callback:function(e){t.$set(t.fish_text,"fontFamily",e)},expression:"fish_text.fontFamily"}},t._l(t.fontFamily,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("div",{staticClass:"edit-select"},[a("span",[t._v("字号 :")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择",size:"mini"},on:{input:function(e){return t.setSize(t.index,t.fish_text.fontSize)}},model:{value:t.fish_text.fontSize,callback:function(e){t.$set(t.fish_text,"fontSize",e)},expression:"fish_text.fontSize"}},t._l(t.fontSize,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("div",{staticClass:"edit-select",staticStyle:{"margin-bottom":"20px"}},[a("span",[t._v("颜色 :")]),t._v(" "),a("el-color-picker",{on:{input:function(e){return t.setColor(t.index,t.fish_text.color)}},model:{value:t.fish_text.color,callback:function(e){t.$set(t.fish_text,"color",e)},expression:"fish_text.color"}})],1)]),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),t._l(t.rightAnswers,function(e,i){return a("div",{staticClass:"yulou"},[a("div",{staticClass:"game-title",staticStyle:{"margin-top":"15px"}},[a("i",{ref:"yulous",refInFor:!0,class:e?"el-icon-arrow-down":"el-icon-arrow-right",attrs:{"data-off":!0},on:{click:function(e){return t.tabShow_child1(i)}}}),t._v(" "),a("span",{on:{click:function(e){return t.tabShow_child1(i)}}},[t._v("鱼篓配置")]),t._v(" "),a("i",{staticClass:"game-title-icon el-icon-delete",on:{click:function(e){return t.changeArr1("del",i)}}}),t._v(" "),a("i",{staticClass:"game-title-icon el-icon-tickets",on:{click:function(e){return t.changeArr1("copy",i)}}}),t._v(" "),a("i",{staticClass:"game-title-icon el-icon-plus",on:{click:function(e){return t.changeArr1("add",i)}}})]),t._v(" "),a("div",{ref:"yulou_item",refInFor:!0,staticClass:"yulou_out"},[a("p",[t._v("答案：")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.text,expression:"rtitem.text"}],attrs:{name:"",id:"",cols:"30",rows:"5",placeholder:"请输入答案"},domProps:{value:e.text},on:{input:function(a){a.target.composing||t.$set(e,"text",a.target.value)}}}),t._v(" "),a("p",[t._v("图片：")]),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),a("div",{staticClass:"upload"},[a("div",{staticClass:"img-box"},[a("img",{attrs:{src:t.resourceData[e.name],alt:"",width:"131",height:"96"}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改图片")]),t._v(" "),a("input",{attrs:{type:"file"},on:{change:function(e){return t.uploadImage(t.index,"rightAnswer",i,e)}}})])])]),t._v(" "),a("div",{staticClass:"lockStatus"},[a("el-input",{attrs:{placeholder:"请输入其宽度",size:"mini"},on:{input:function(a){return t.setElemented(t.index,"rightAnswer"+i,"width",a,e.ratio,"image",i)}},model:{value:e.width,callback:function(a){t.$set(e,"width",a)},expression:"rtitem.width"}},[a("template",{slot:"prepend"},[t._v("W :")])],2),t._v(" "),a("span",{staticClass:"lock_block",attrs:{lockRadio:e.ratio}},[a("img",{attrs:{src:e.lock?t.lockImg:t.unLockImg,"data-lock":"false",alt:""},on:{click:function(a){return t.lockStatusData(e,a)}}})]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入其高度",size:"mini"},on:{input:function(a){return t.setElemented(t.index,"rightAnswer"+i,"height",a,e.ratio,"image",i)}},model:{value:e.height,callback:function(a){t.$set(e,"height",a)},expression:"rtitem.height"}},[a("template",{slot:"prepend"},[t._v("H :")])],2)],1),t._v(" "),a("el-input",{attrs:{placeholder:"请输入其起始x",size:"mini"},on:{input:function(a){return t.setElemented(t.index,"rightAnswer"+i,"x",a,e.ratio,"image",i)}},model:{value:e.x,callback:function(a){t.$set(e,"x",a)},expression:"rtitem.x"}},[a("template",{slot:"prepend"},[t._v("X :")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入其起始y",size:"mini"},on:{input:function(a){return t.setElemented(t.index,"rightAnswer"+i,"y",a,e.ratio,"image",i)}},model:{value:e.y,callback:function(a){t.$set(e,"y",a)},expression:"rtitem.y"}},[a("template",{slot:"prepend"},[t._v("Y :")])],2),t._v(" "),a("p",[t._v("动画：")]),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),a("div",{staticClass:"upload"},[a("div",{staticClass:"animate-box"},[a("span",{domProps:{textContent:t._s(e.animate.name)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改文件")]),t._v(" "),a("input",{attrs:{type:"file",multiple:"multiple"},on:{change:function(e){return t.uploadAnimation1(t.index,"rightAnswer",e,i)}}})])])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},on:{input:function(a){return t.setElementStatus1(t.index,"width",e,a,i,e.animate.ratio)}},model:{value:e.animate.width,callback:function(a){t.$set(e.animate,"width",a)},expression:"rtitem.animate.width"}},[a("template",{slot:"prepend"},[t._v("W :")])],2),t._v(" "),a("span",{staticClass:"lock_block",attrs:{lockRadio:e.animate.radio}},[a("img",{attrs:{src:e.animate.lock?t.lockImg:t.unLockImg,"data-lock":"false",alt:""},on:{click:function(a){return t.lockStatusData1(e,a)}}})]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},on:{input:function(a){return t.setElementStatus1(t.index,"height",e,a,i,e.animate.ratio)}},model:{value:e.animate.height,callback:function(a){t.$set(e.animate,"height",a)},expression:"rtitem.animate.height"}},[a("template",{slot:"prepend"},[t._v("H :")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},on:{input:function(a){return t.setElementStatus1(t.index,"x",e,a,i,e.animate.ratio)}},model:{value:e.animate.x,callback:function(a){t.$set(e.animate,"x",a)},expression:"rtitem.animate.x"}},[a("template",{slot:"prepend"},[t._v("X :")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},on:{input:function(a){return t.setElementStatus1(t.index,"y",e,a,i,e.animate.ratio)}},model:{value:e.animate.y,callback:function(a){t.$set(e.animate,"y",a)},expression:"rtitem.animate.y"}},[a("template",{slot:"prepend"},[t._v("Y :")])],2),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),a("div",{staticStyle:{width:"100%",height:"20px"}})],1)])}),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),a("div",{staticClass:"game-title",staticStyle:{"margin-top":"15px"}},[a("i",{ref:"success_an",staticClass:"el-icon-arrow-down",attrs:{"data-off":!0},on:{click:function(e){return t.tabShow_child2()}}}),t._v(" "),a("span",{on:{click:function(e){return t.tabShow_child2()}}},[t._v("成功动画配置")])]),t._v(" "),a("div",{ref:"success_out",staticClass:"success_out"},[a("div",{staticClass:"edit-switch",staticStyle:{"margin-left":"-42px"}},[a("el-switch",{attrs:{"active-color":"#77DC04","inactive-color":"#ff4949"},model:{value:t.success_action.show,callback:function(e){t.$set(t.success_action,"show",e)},expression:"success_action.show"}}),t._v(" "),a("span",[t._v("动画")])],1),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},on:{input:function(e){return t.setElementStatus2(t.index,"width",t.success_action,e,t.success_action.ratio)}},model:{value:t.success_action.width,callback:function(e){t.$set(t.success_action,"width",e)},expression:"success_action.width"}},[a("template",{slot:"prepend"},[t._v("W :")])],2),t._v(" "),a("span",{staticClass:"lock_block",attrs:{lockRadio:t.success_action.radio}},[a("img",{attrs:{src:t.success_action.lock?t.lockImg:t.unLockImg,"data-lock":"false",alt:""},on:{click:function(e){return t.lockStatusData(t.success_action,e)}}})]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},on:{input:function(e){return t.setElementStatus2(t.index,"height",t.success_action,e,t.success_action.ratio)}},model:{value:t.success_action.height,callback:function(e){t.$set(t.success_action,"height",e)},expression:"success_action.height"}},[a("template",{slot:"prepend"},[t._v("H :")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},on:{input:function(e){return t.setElementStatus2(t.index,"x",t.success_action,e,t.success_action.ratio)}},model:{value:t.success_action.x,callback:function(e){t.$set(t.success_action,"x",e)},expression:"success_action.x"}},[a("template",{slot:"prepend"},[t._v("X :")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},on:{input:function(e){return t.setElementStatus2(t.index,"y",t.success_action,e,t.success_action.ratio)}},model:{value:t.success_action.y,callback:function(e){t.$set(t.success_action,"y",e)},expression:"success_action.y"}},[a("template",{slot:"prepend"},[t._v("Y :")])],2),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),a("div",{staticClass:"upload"},[a("div",{staticClass:"animate-box"},[a("span",{domProps:{textContent:t._s(t.success_action.name)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改文件")]),t._v(" "),a("input",{attrs:{type:"file",multiple:"multiple"},on:{change:function(e){return t.uploadAnimation_success(t.index,"success_animate",e)}}})])])])],1)],2)])},staticRenderFns:[]};var S={render:function(){var t=this.$createElement;return(this._self._c||t)("div")},staticRenderFns:[]};var C={render:function(){var t=this.$createElement;return(this._self._c||t)("div")},staticRenderFns:[]};var D={name:"EditGame",data:function(){return{gameData:null,showStatus:!1,publicSourceData:null,tabShowStatus:[],publicChildStatus:{button:!1,animate:!1,audio:!1},publicStatus:!1,resourceData:null,feedbackAnimateData:null,tabShowLists:{bgImage:!1,stemImg:!1,subTitle:!1,option:!1,option1:!1,option2:!1,option3:!1,option4:!1,option5:!1,option6:!1,option7:!1,option8:!1,option9:!1,option10:!1}}},props:["allData"],methods:{setLock:function(t){},getJSON:function(){var t=this;this.getResourceData(function(){t.showStatus=!0}),this.gameData=this.allData.sources,this.feedbackAnimateData=this.allData.feedbackAnimate,this.publicSourceData=this.allData.publicSourceData,this.tabShowStatus=[],this.gameData.forEach(function(e,a){t.tabShowStatus.push({show:!1,lock:!1,child:JSON.parse(m()(t.tabShowLists))})})},getResourceData:function(t){var e=this;this.$http.get("/getResourceJSON",{params:{}}).then(function(a){e.resourceData=a,t&&t()})},changeArr:function(t,e){var a=this;if("add"===t){var i=JSON.parse(m()(this.gameData[0]));!function t(e){r()(e).forEach(function(a,i){"object"===(void 0===a?"undefined":o()(a))?t(a):"boolean"==typeof a?e[s()(e)[i]]=!1:"string"==typeof a?e[s()(e)[i]]="":"number"==typeof a&&(e[s()(e)[i]]=0)})}(i),this.gameData.push(i),this.tabShowStatus.push({show:!1,lock:!1,child:JSON.parse(m()(this.tabShowLists))}),Object(x.CopyPageAndRender)(this.gameData.length-1,i,this.allData)}else if("copy"===t){var n=JSON.parse(m()(this.gameData[e]));this.gameData.push(JSON.parse(m()(this.gameData[e]))),this.tabShowStatus.push({show:!1,lock:!1,child:JSON.parse(m()(this.tabShowLists))}),Object(x.CopyPageAndRender)(this.gameData.length-1,n,this.allData)}else"del"===t&&this.gameData.length>1&&this.$confirm("此操作将删除选项, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$message({type:"success",message:"删除成功!"}),a.gameData.splice(e,1),a.tabShowStatus.splice(e,1),store.dispatch("setPageNumber",0),window.stage.getChildByName("GAME").removeChildren(),Object(x.RenderAllData)(!0,a.allData)}).catch(function(){a.$message({type:"info",message:"已取消"})})},tabShow:function(t,e){var a=this,i=this.$refs[e+"Title"],n=this.tabShowStatus[t].show;if(s()(this.tabShowStatus[t].child).forEach(function(e,i){a.tabShowStatus[t].child[e]=!1}),n)this.tabShowStatus[t].show=!1,i.className="el-icon-arrow-right",store.dispatch("setPageNumber",-1);else{var o=window.stage.getChildByName("GAME");this.tabShowStatus.forEach(function(t,e){a.tabShowStatus[e].show=!1}),o.children.forEach(function(t,e){t.visible=!1}),this.tabShowStatus[t].show=!0,o.getChildByName("GAME"+t).visible=!0,i.className="el-icon-arrow-down",store.dispatch("setPageNumber",t)}console.log(store.state.pageNumber)},updateResourceData:function(){this.getResourceData()}},mounted:function(){this.getJSON()},components:{EditGamePublic:b,EditGamePrivate:a("C7Lr")(y,_,!1,function(t){a("wcXr")},"data-v-9ffe6e18",null).exports,EditGameBefore:a("C7Lr")({name:"EditGameBefore",props:["allData","resourceData"],data:function(){return{}},methods:{updateResourceData:function(){this.$emit("updateResourceData")}},mounted:function(){}},S,!1,function(t){a("HT3b")},"data-v-9733a958",null).exports,EditGameAfter:a("C7Lr")({name:"EditGameAfter",props:["allData","resourceData"],data:function(){return{}},methods:{updateResourceData:function(){this.$emit("updateResourceData")}},mounted:function(){}},C,!1,function(t){a("Q1qI")},"data-v-19b603a8",null).exports}},B={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.showStatus?a("div",{staticClass:"game"},[a("EditGameBefore",{attrs:{gameData:t.gameData,resourceData:t.resourceData,allData:t.allData},on:{updateResourceData:t.updateResourceData}}),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),t._l(t.gameData,function(e,i){return a("div",{staticClass:"game-box",style:{marginTop:0===i?"8px":0}},[a("div",{staticClass:"game-title",staticStyle:{background:"#313131","padding-left":"8px","border-bottom":"1px solid #232323"},style:{background:t.tabShowStatus[i].show?"#409EFF":"#313131"},on:{click:function(e){return t.setLock(i)}}},[a("i",{ref:"oneTitle",refInFor:!0,class:t.tabShowStatus[i].show?"el-icon-arrow-down":"el-icon-arrow-right",on:{click:function(e){return t.tabShow(i,"one")}}}),t._v(" "),a("span",{on:{click:function(e){return t.tabShow(i,"one")}}},[t._v("\n                内容页"+t._s(i+1)+"\n            ")]),t._v(" "),a("i",{staticClass:"game-title-icon el-icon-delete",on:{click:function(e){return t.changeArr("del",i)}}}),t._v(" "),a("i",{staticClass:"game-title-icon el-icon-tickets",on:{click:function(e){return t.changeArr("copy",i)}}}),t._v(" "),a("i",{staticClass:"game-title-icon el-icon-plus",on:{click:function(e){return t.changeArr("add",i)}}})]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.tabShowStatus[i].show,expression:"tabShowStatus[index].show"}]},[a("EditGamePublic",{attrs:{gameData:t.gameData,item:e,index:i,resourceData:t.resourceData,allData:t.allData,tabShowStatus:t.tabShowStatus},on:{updateResourceData:t.updateResourceData}}),t._v(" "),a("EditGamePrivate",{attrs:{gameData:t.gameData,item:e,index:i,resourceData:t.resourceData,allData:t.allData,tabShowStatus:t.tabShowStatus,tabShowLists:t.tabShowLists},on:{updateResourceData:t.updateResourceData}})],1)])}),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),a("EditGameAfter",{attrs:{gameData:t.gameData,resourceData:t.resourceData,allData:t.allData},on:{updateResourceData:t.updateResourceData}})],2):t._e()},staticRenderFns:[]};var I=a("C7Lr")(D,B,!1,function(t){a("aoyp")},null,null).exports,A={name:"EditEnd",data:function(){return{time:0,label:"1",endData:null,showStatus:!1,tabShowStatus:{endBg:!1,goldNum:!1},fontFamily:[{label:"微软雅黑",value:"Microsoft YaHei"},{label:"宋体",value:"SimSun"},{label:"黑体",value:"SimHei"},{label:"方正粗圆",value:"FZCuYuan-M03S"},{label:"方正粗圆简",value:"FZZhunYuan-M02S"}],resourceData:null}},props:["allData"],methods:{setGoldTextFontStyle:function(t){this.endData.goldText[t]=!this.endData.goldText[t],this.endData.goldText[t]?this.endData.goldText.fontWeight="bold":this.endData.goldText.fontWeight="normal","italic"==t&&(this.endData.goldText[t]?this.endData.goldText.fontStyle="italic":this.endData.goldText.fontStyle="")},setResource:function(t,e){this.endData[t][e].show||(this.endData[t][e].name="")},tabShow:function(t,e){var a=this;this.$refs[e];this.tabShowStatus[t]?this.tabShowStatus[t]=!1:(s()(this.tabShowStatus).forEach(function(t,e){a.tabShowStatus[t]=!1}),this.tabShowStatus[t]=!0)},getJSON:function(){var t=this;this.endData=this.allData.one.end,this.getResourceData(function(){t.showStatus=!0})},getResourceData:function(t){var e=this;this.$http.get("/getResourceJSON",{params:{}}).then(function(a){e.resourceData=a,t&&t()})},uploadAnimation:function(t){var e=this;if(0!==t.target.files.length&&3===t.target.files.length){var a={};r()(t.target.files).forEach(function(t,e){a["animation"+(e+1)]=t}),this.$http.post("/uploadingAnimation",a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(a){t.target.value="",e.endData.endBg.animate.name=a.resourceName})}else this.$message({message:"上传文件个数不符合",type:"warning"})},uploadImage:function(t){var e=this,a=t.target.files[0].name.split(".")[t.target.files[0].name.split(".").length-1];-1!==["jpg","png"].indexOf(a)?0!==t.target.files.length?t.target.files[0].size/1024/1024>1?this.$message({message:"上传文件大小在1M以内",type:"warning"}):this.$http.post("/uploadingImage",{image:t.target.files[0]},{headers:{"Content-Type":"multipart/form-data"}}).then(function(a){console.log(a),t.target.value="",e.endData.endBg.image.name=a.resourceName,e.endData.endBg.image.width=a.width,e.endData.endBg.image.height=a.height,e.endData.endBg.image.x=0,e.endData.endBg.image.y=0,e.getResourceData()}):this.$message({message:"上传文件个数不符合",type:"warning"}):this.$message({message:"上传类型不符",type:"error"})}},mounted:function(){this.getJSON()}},k={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.showStatus?a("div",{staticClass:"end"},[a("div",{staticClass:"end-time"},[a("el-input",{staticStyle:{width:"100%","margin-top":"0"},attrs:{placeholder:"",size:"mini"},model:{value:t.endData.jumpResultTime,callback:function(e){t.$set(t.endData,"jumpResultTime",e)},expression:"endData.jumpResultTime"}},[a("template",{slot:"prepend"},[t._v("最后一题停留时间")]),t._v(" "),a("template",{slot:"append"},[t._v("ms")])],2)],1),t._v(" "),a("div",{staticClass:"end-title"},[a("i",{ref:"endBgTitle",class:t.tabShowStatus.endBg?"el-icon-arrow-down":"el-icon-arrow-right",on:{click:function(e){return t.tabShow("endBg","endBgTitle")}}}),t._v(" "),a("span",{on:{click:function(e){return t.tabShow("endBg","endBgTitle")}}},[t._v("\n            背景图\n        ")])]),t._v(" "),t.tabShowStatus.endBg?a("div",{staticClass:"end-inner"},[a("div",{staticClass:"edit-checkbox-title"},[a("el-checkbox",{attrs:{size:"small"},on:{change:function(e){return t.setResource("endBg","image")}},model:{value:t.endData.endBg.image.show,callback:function(e){t.$set(t.endData.endBg.image,"show",e)},expression:"endData.endBg.image.show"}},[t._v("图片")])],1),t._v(" "),a("div",{staticClass:"upload"},[a("div",{staticClass:"img-box"},[a("img",{attrs:{src:t.resourceData[t.endData.endBg.image.name],alt:"",width:"131",height:"96"}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改图片")]),t._v(" "),a("input",{attrs:{type:"file"},on:{change:function(e){return t.uploadImage(e)}}})])])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},model:{value:t.endData.endBg.image.x,callback:function(e){t.$set(t.endData.endBg.image,"x",e)},expression:"endData.endBg.image.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},model:{value:t.endData.endBg.image.y,callback:function(e){t.$set(t.endData.endBg.image,"y",e)},expression:"endData.endBg.image.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},model:{value:t.endData.endBg.image.width,callback:function(e){t.$set(t.endData.endBg.image,"width",e)},expression:"endData.endBg.image.width"}},[a("template",{slot:"prepend"},[t._v("W：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},model:{value:t.endData.endBg.image.height,callback:function(e){t.$set(t.endData.endBg.image,"height",e)},expression:"endData.endBg.image.height"}},[a("template",{slot:"prepend"},[t._v("H：")])],2),t._v(" "),a("div",{staticClass:"edit-checkbox-title"},[a("el-checkbox",{attrs:{size:"small"},on:{change:function(e){return t.setResource("endBg","animate")}},model:{value:t.endData.endBg.animate.show,callback:function(e){t.$set(t.endData.endBg.animate,"show",e)},expression:"endData.endBg.animate.show"}},[t._v("动画")])],1),t._v(" "),a("div",{staticClass:"upload"},[a("span",{staticClass:"file-title"},[t._v("\n                动画文件：\n            ")]),t._v(" "),a("div",{staticClass:"animate-box"},[a("span",{domProps:{textContent:t._s(t.endData.endBg.animate.name)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改文件")]),t._v(" "),a("input",{attrs:{type:"file",multiple:"multiple"},on:{change:function(e){return t.uploadAnimation(e)}}})])])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},model:{value:t.endData.endBg.animate.x,callback:function(e){t.$set(t.endData.endBg.animate,"x",e)},expression:"endData.endBg.animate.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},model:{value:t.endData.endBg.animate.y,callback:function(e){t.$set(t.endData.endBg.animate,"y",e)},expression:"endData.endBg.animate.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},model:{value:t.endData.endBg.animate.scale,callback:function(e){t.$set(t.endData.endBg.animate,"scale",e)},expression:"endData.endBg.animate.scale"}},[a("template",{slot:"prepend"},[t._v("Scale：")])],2),t._v(" "),a("div",{staticClass:"edit-switch"},[a("span",[t._v("loop")]),t._v(" "),a("el-switch",{attrs:{"active-color":"#77DC04","inactive-color":"#ff4949"},model:{value:t.endData.endBg.animate.loop,callback:function(e){t.$set(t.endData.endBg.animate,"loop",e)},expression:"endData.endBg.animate.loop"}})],1)],1):t._e(),t._v(" "),a("div",{staticClass:"end-title"},[a("i",{ref:"goldNumTitle",class:t.tabShowStatus.goldNum?"el-icon-arrow-down":"el-icon-arrow-right",on:{click:function(e){return t.tabShow("goldNum","goldNumTitle")}}}),t._v(" "),a("span",{on:{click:function(e){return t.tabShow("goldNum","goldNumTitle")}}},[t._v("\n            金币文字\n        ")])]),t._v(" "),t.tabShowStatus.goldNum?a("div",{staticClass:"end-inner"},[a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},model:{value:t.endData.goldText.x,callback:function(e){t.$set(t.endData.goldText,"x",e)},expression:"endData.goldText.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},model:{value:t.endData.goldText.y,callback:function(e){t.$set(t.endData.goldText,"y",e)},expression:"endData.goldText.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2),t._v(" "),a("div",{staticClass:"edit-select"},[a("span",[t._v("字体：")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择",size:"mini"},model:{value:t.endData.goldText.fontFamily,callback:function(e){t.$set(t.endData.goldText,"fontFamily",e)},expression:"endData.goldText.fontFamily"}},t._l(t.fontFamily,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},model:{value:t.endData.goldText.fontSize,callback:function(e){t.$set(t.endData.goldText,"fontSize",e)},expression:"endData.goldText.fontSize"}},[a("template",{slot:"prepend"},[t._v("字号：")])],2),t._v(" "),a("div",{staticClass:"edit-select"},[a("span",[t._v("颜色：")]),t._v(" "),a("el-color-picker",{model:{value:t.endData.goldText.color,callback:function(e){t.$set(t.endData.goldText,"color",e)},expression:"endData.goldText.color"}})],1),t._v(" "),a("div",{staticClass:"font-style"},[a("span",{class:t.endData.goldText.strong?"font-style-color":"",on:{click:function(e){return t.setGoldTextFontStyle("strong")}}},[t._v("B")]),t._v(" "),a("span",{class:t.endData.goldText.italic?"font-style-color":"",on:{click:function(e){return t.setGoldTextFontStyle("italic")}}},[t._v("I")])])],1):t._e()]):t._e()},staticRenderFns:[]};var N=a("C7Lr")(A,k,!1,function(t){a("RQpN")},"data-v-022bea10",null).exports,T=(a("E/U7"),a("L7Pj")),F=a.n(T),$=a("7Q5p"),E=a.n($),P=a("jZ0Z"),z=(a("VWrN"),a("qWh7")),O=a.n(z),M=void 0,R={name:"start",data:function(){return{isShow:!1,number:0,answerStatus:[],answerData:[],option:["A","B","C","D","E","F","G","H"]}},methods:{createApp:function(){return new g.Application({width:1920,height:1080,autoSize:!0,transparent:!0})}},components:{},created:function(){document.getElementsByClassName("page-loading")[0].style.display="block"},props:["allData"],destroyed:function(){PIXI.sound.stopAll(),app.destroy()},mounted:function(){var t=this;PIXI.sound.stopAll(),document.getElementsByClassName("page-loading")[0].style.display="block",window.app=this.createApp(),app.view.style.width="19.2rem",app.view.style.height="10.8rem",app.view.id="appCanvas",window.stage=app.stage;this.$refs.canvas.appendChild(app.view),stage.interactive=!0,Object(P.load)().then(function(e){console.log("%c资源加载完啦✌️","color:#FF323B;font-weight:bold;"),t.$nextTick(function(){window.question=e.question.data,M=e.question.data,e.question.data;var a=new O.a(M.one.start,e);stage.addChild(a),store.state.testNum=e.question.data.sources.length,document.getElementsByClassName("page-loading")[0].style.display="none",Object(x.RenderAllData)(!0,t.allData),function(){for(var t=document.querySelectorAll(".container"),e=0;e<t.length;e++)t[e].style.width=window.clientWidth-340+"px",t[e].style.height=(window.clientWidth-340)*(10.8/19.2)+"px"}()})})}},X={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container"},[e("div",{ref:"canvas",staticClass:"canvas"}),this._v(" "),e("img",{staticClass:"logo",attrs:{src:"static/images/logo.png",id:"logo"}})])},staticRenderFns:[]};var j=a("C7Lr")(R,X,!1,function(t){a("A71J")},"data-v-f9ca8058",null).exports,G=!0;a("IcnI");var L={name:"Edit",data:function(){return{allData:null,showStatus:!1,publicImg:"",maskStatus:!1,startData:null,activeName:"game",activeName1:"game1",modelName:E.a.title,version:E.a.version,label:"2",submitStatus:!1}},components:{start:v,game:I,end:N,index:j},methods:{setContainer:function(t){store.dispatch("setPageNumber",-1),"ftp"===t?"start"===this.activeName?(this.allData.one.start.show&&(window.stage.getChildByName("START").visible=!0),window.stage.getChildByName("GAME").visible=!1,window.stage.getChildByName("gameBgSound")&&window.stage.setChildIndex(window.stage.getChildByName("gameBgSound"),window.stage.children.length-1)):"game"===this.activeName&&(window.stage.getChildByName("GAME").visible=!0,window.stage.getChildByName("GAME").children.forEach(function(t){t.visible=!1}),window.stage.getChildByName("GAME").getChildByName("GAME0").visible=!0):"start1"===this.activeName1?(this.allData.one.start.show&&(window.stage.getChildByName("START").visible=!0),window.stage.getChildByName("GAME").visible=!1):"game1"===this.activeName1&&(window.stage.getChildByName("GAME").visible=!0,window.stage.getChildByName("GAME").children.forEach(function(t){t.visible=!1}),window.stage.getChildByName("GAME").getChildByName("GAME0").visible=!0)},reload:function(){location.reload(!0)},reloadIframe:function(){location.reload(!0)},changeType:function(){"1"===this.label?this.allData.interface=!0:this.allData.interface=!1},getJSON:function(){var t=this;this.$http.get("/getJSON",{params:{}}).then(function(e){t.allData=e,console.log(t.allData.interface),t.allData.interface?t.label="1":t.label="2";var a=F()(".container"),i=window.clientWidth-340+"px",s=(window.clientWidth-340)*(10.8/19.2)+"px";a.css({width:i,height:s}),t.showStatus=!0})},writeJSON:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"submit";if(G){G=!1;var a=JSON.parse(m()(this.allData.one.end));!function t(e){r()(e).forEach(function(a,i){"object"===(void 0===a?"undefined":o()(a))?t(a):"boolean"==typeof a?e[s()(e)[i]]=!1:"string"==typeof a?e[s()(e)[i]]="":"number"==typeof a&&(e[s()(e)[i]]=0)})}(a),"1"===this.label&&(this.allData.one.end=a,console.log(this.allData.one.end)),this.$http.post("/writeJSON",{dataList:m()(this.allData)}).then(function(a){if(t.$message({type:a.type,message:a.message}),t.submitStatus=!0,F()(".submitBtn").removeClass("submitActive"),"preview"===e){var i=void 0,s="start"===t.activeName||"start1"===t.activeName1||-1==store.state.pageNumber?"true":"false";"true"===s&&store.dispatch("setPageNumber",0),i="http://localhost:8888/#/preview?id="+store.state.pageNumber+"&startStatus="+s,window.open(i)}setTimeout(function(){t.submitStatus=!1,G=!0,F()(".submitBtn").addClass("submitActive")},1e3)})}}},mounted:function(){this.getJSON(),window.onresize=t,this.$nextTick(function(){t()});function t(){for(var t=document.querySelectorAll(".container"),e=0;e<t.length;e++)t[e].style.width=window.clientWidth-340+"px",t[e].style.height=(window.clientWidth-340)*(10.8/19.2)+"px"}window.location.href.split("#")[0]}},q={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[t.allData?a("div",{staticClass:"iframe"},[a("index",{ref:"container",attrs:{allData:t.allData}})],1):t._e(),t._v(" "),t.showStatus?a("div",{staticClass:"edit"},[a("header",[a("h1",{domProps:{textContent:t._s(t.modelName)}}),t._v(" "),a("p",{domProps:{textContent:t._s("版本号：v"+t.version)}})]),t._v(" "),a("div",{staticClass:"edit-tab"},[a("el-radio",{attrs:{label:"1"},on:{change:function(e){return t.changeType()}},model:{value:t.label,callback:function(e){t.label=e},expression:"label"}},[t._v("课件平台組课")]),t._v(" "),a("el-radio",{attrs:{label:"2"},on:{change:function(e){return t.changeType()}},model:{value:t.label,callback:function(e){t.label=e},expression:"label"}},[t._v("ftp組课")])],1),t._v(" "),"1"===t.label?a("el-tabs",{attrs:{type:"border-card",value:"内容页",stretch:!0},on:{"tab-click":function(e){return t.setContainer("new")}},model:{value:t.activeName1,callback:function(e){t.activeName1=e},expression:"activeName1"}},[a("el-tab-pane",{attrs:{label:"开始页",name:"start1"}},["start1"===t.activeName1?a("start",{ref:"start1",attrs:{allData:t.allData},on:{reload:t.reloadIframe}}):t._e()],1),t._v(" "),a("el-tab-pane",{attrs:{label:"内容页",name:"game1"}},["game1"===t.activeName1?a("game",{ref:"game1",attrs:{allData:t.allData},on:{reload:t.reloadIframe}},[t._v(">\n\n                ")]):t._e()],1)],1):t._e(),t._v(" "),"2"===t.label?a("el-tabs",{attrs:{type:"border-card",value:"内容页",stretch:!0},on:{"tab-click":function(e){return t.setContainer("ftp")}},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"开始页",name:"start"}},["start"===t.activeName?a("start",{ref:"start",attrs:{allData:t.allData},on:{reload:t.reloadIframe}}):t._e()],1),t._v(" "),a("el-tab-pane",{attrs:{label:"内容页",name:"game"}},["game"===t.activeName?a("game",{ref:"game",attrs:{allData:t.allData},on:{reload:t.reloadIframe}}):t._e()],1),t._v(" "),a("el-tab-pane",{attrs:{label:"结果页",name:"end"}},["end"===t.activeName?a("end",{ref:"end",attrs:{allData:t.allData},on:{reload:t.reloadIframe}}):t._e()],1)],1):t._e(),t._v(" "),a("div",{staticClass:"submit"},[a("el-button",{staticClass:"submitBtn submitActive",attrs:{type:"primary"},on:{click:function(e){return t.writeJSON("preview")}}},[t._v("预览")]),t._v(" "),a("el-button",{staticClass:"submitBtn submitActive",attrs:{type:"primary",disabled:t.submitStatus},on:{click:function(e){return t.writeJSON()}}},[t._v("保存")])],1)],1):t._e()])},staticRenderFns:[]};var Y=a("C7Lr")(L,q,!1,function(t){a("epwY")},null,null);e.a=Y.exports},"7Q5p":function(t,e){t.exports={title:"小鱼分类",version:"2.0.12",id:"cjuw1fsfd000wq068arnygzzj",stages:[]}},"8j8P":function(t,e,a){"use strict";a("E/U7");var i=a("L7Pj"),s=a.n(i),n=a("7Q5p"),o=a.n(n),l={name:"Edit",data:function(){return{allData:null,showStatus:!1,publicImg:"",maskStatus:!1,startData:null,activeName:"game",activeName1:"game1",modelName:o.a.title,version:o.a.version,label:"2",submitStatus:!1}},methods:{reload:function(){location.reload(!0)}},mounted:function(){s()("#submitButton").on("click",function(){if(window.store.state.pShow){console.log("新接口强制提交");s()(".iframe iframe")[0].contentWindow.postMessage({type:"getAnswer"},"*")}else{console.log("旧接口强制提交");s()(".iframe iframe")[0].contentWindow.postMessage({type:"resubmitAnswer"},"*")}}),window.addEventListener("message",function(t){if("onload"==t.data.type)console.log("onload接口");else if("submitAnswer"==t.data.type){for(var e=t.data.data.testAnswer,a=t.data.data.testNum,i=0,n=0,o=0;o<a;o++)if(void 0!=e[o]){var l=e[o],r=l.answer.length;"string"==typeof l.answer&&(r=1);var c=l.rightnum;l.isright&&0,0==c&&0==l.type&&(n++,c=0),c>0&&0==l.type&&(c=r),l.is_right=c==r?1:0,l.rate=c/r,i+=l.rate}var m=i/a,u={goldnum:n=(n+=Math.ceil(10*m))>10?10:n,result:t.data.data.testAnswer};console.log("newData"),console.log(u);var d={type:"answerResult",data:u};s()(".iframe iframe")[0].contentWindow.postMessage(d,"*")}else if("submitData"==t.data.type){s()(".iframe iframe")[0].contentWindow.postMessage({type:"resubmitAnswer"},"*")}else if("close"==t.data.type)s()(".iframe iframe").attr("src",""),s()(".submitData").hide();else if("answer"==t.data.type){var g={type:"answerTextResult",data:t.data.data};s()(".iframe iframe")[0].contentWindow.postMessage(g,"*")}});var t=void 0;t="http://localhost:8888/#/?id="+this.$route.query.id+"&startStatus="+this.$route.query.startStatus,document.getElementById("iframeWindow").src=t}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("img",{attrs:{src:"static/images/reload.png",alt:"",id:"reload"},on:{click:function(e){return t.reload()}}}),t._v(" "),t._m(0)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"iframe"},[e("button",{attrs:{id:"submitButton"}},[this._v("强制提交")]),this._v(" "),e("iframe",{attrs:{src:"/",id:"iframeWindow",frameborder:"0"}})])}]};var c=a("C7Lr")(l,r,!1,function(t){a("MSoF")},"data-v-d8ddc114",null);e.a=c.exports},"9vCu":function(t,e,a){"use strict";var i=a("9bLE"),s=a("QXBk"),n=void 0,o={data:function(){return{time:3,question:question,resultUrl:void 0}},computed:{goldnum:function(t,e){return store.state.goldnum}},methods:{createApp:function(){return new i.Application({width:1920,height:1080,autoSize:!0,transparent:!0})}},mounted:function(){var t=this;if(question.one.end.endBg.image.show&&(this.resultUrl=res[question.one.end.endBg.image.name].url),question.one.end.endBg.animate.show){app.stop(),(n=this.createApp()).view.style.width="19.2rem",n.view.style.height="10.8rem",this.$refs.canvas.appendChild(n.view);var e=n.stage,a=Object(s.a)(question.one.end.endBg.animate.name);a.state.setAnimation(1,"animation",question.one.end.endBg.animate.loop);console.log(e),a.x=question.one.end.endBg.animate.x,a.y=question.one.end.endBg.animate.y,a.scale.set(question.one.gameBgSound.scale),e.addChild(a)}console.log("金币页+"+store.state.goldnum),this.fadeIn=!0,console.log(res[question.one.end.endBg.image.name]);var i=setInterval(function(){if(t.time--,0===t.time){clearInterval(i);window.parent.postMessage({type:"close"},"*")}},1e3)}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"result"},[a("div",[a("img",{staticClass:"bg",attrs:{src:"static/images/result.png",id:"bgImg"}}),t._v(" "),a("span",{staticClass:"txt",style:{color:t.question.one.end.goldText.color,left:t.question.one.end.goldText.x/100+"rem",top:t.question.one.end.goldText.y/100+"rem",fontSize:t.question.one.end.goldText.fontSize/100+"rem",fontFamily:t.question.one.end.goldText.fontFamily,fontWeight:t.question.one.end.goldText.fontWeight,fontStyle:t.question.one.end.goldText.fontStyle}},[t._v(t._s(t.goldnum))]),t._v(" "),t.question.one.end.endBg.image.show?a("img",{staticClass:"resimg",style:{left:t.question.one.end.endBg.image.x/100+"rem",top:t.question.one.end.endBg.image.y/100+"rem",width:t.question.one.end.endBg.image.width/100+"rem",height:t.question.one.end.endBg.image.height/100+"rem"},attrs:{src:t.resultUrl}}):t._e()]),t._v(" "),a("audio",{attrs:{autoplay:"autoplay",src:"static/audios/result.mp3"}}),t._v(" "),t.question.one.end.endBg.animate.show?a("div",{ref:"canvas",staticClass:"canvas"}):t._e()])},staticRenderFns:[]};var r=a("C7Lr")(o,l,!1,function(t){a("JLmz")},"data-v-dde5dab6",null);e.a=r.exports},A71J:function(t,e){},"E/U7":function(t,e){t.exports={port:8080}},HT3b:function(t,e){},IcnI:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("xd7I"),s=a("R4Sj"),n=a("VWrN");i.default.use(s.a);var o={postAnswer:function(t){var e=t.state;console.log(e.postArr,"整体答题数据"),Object(n.d)(e.postArr,e.testNum)},defaultPushToPostArr:function(t,e){t.state.postArr.push(e)},increment:function(t){var e=t.state;e.pageNumber++,console.log(e)},decrement:function(t){t.state.pageNumber--},setPageNumber:function(t,e){t.state.pageNumber=e},pushToPostArr:function(t,e){var a=t.state;console.log(e,"第"+e.id+"道题答题数据"),a.postArr.splice(e.id,1,e)}};window.store=new s.a.Store({state:{postArr:[],resultArr:[],pisShow:!1,pShow:!1,goldnum:0,testNum:1,result:[],isShow:!1,pageNumber:0,question:null},actions:o,mutations:{setIsPost:function(t,e){t.isShow=e},setpIsPost:function(t,e){t.pisShow=e}}})},JLmz:function(t,e){},MSoF:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("xd7I"),s=a("9bLE"),n=a("5ohs"),o=a("QBX4");a("IcnI");var l={name:"App",data:function(){return{}},components:{End:n.a,Pend:o.a},computed:{isShow:function(t,e){return store.state.isShow},pisShow:function(t,e){return store.state.pisShow}},mounted:function(){console.log("APP组件加载完成")}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view"),t._v(" "),t.isShow?a("End"):t._e(),t._v(" "),t.pisShow?a("Pend"):t._e(),t._v(" "),t.$store.state.isShow?a("div",{staticClass:"text"}):t._e()],1)},staticRenderFns:[]};var c=a("C7Lr")(l,r,!1,function(t){a("SYJf")},null,null).exports,m=a("KGCO"),u=a("zwgh"),d=a("uTb0"),g=a.n(d),h=(a("mbbH"),a("r14f"),a("xtmC"),a("VWrN")),p=a("Tfbs"),v=a("AA3o"),f=a.n(v),w=a("xSur"),b=a.n(w),x=(a("UH4H"),a("R4Sj"),function(){function t(){f()(this,t),this.game=null,this.config=question.sources[0],this.fishArr=[],this.asArr=[],this.gameBgAnimate=null,this.leftfishArr=[],this.rightfishArr=[],this.isInit=!1,this.fishAnswer=[],this.classPosArr=[],this.tempArr=[],this.temfishAnswer=[],this.allfishAnswer=[],this.success_animate=question.sources[0].success_animate,this.cursorSprite=null,this.cursorSprite2=null}return b()(t,[{key:"exec",value:function(){this.game=stage.getChildByName("GAME").getChildByName("GAME"+store.state.pageNumber),Object(p.RenderPageByIndex)(store.state.pageNumber),this.init(),this.cur(),this.entrance(),this.initFishBox(),this.sportFish()}},{key:"init",value:function(){console.log("小鱼放置数组中=============");var t=this,e=[];this.game.getChildByName("componentContainer").children.map(function(a,i){-1!=String(a.name).indexOf("option")&&e.push(a),-1!=String(a.name).indexOf("rightAnswer")&&(a.anchor.set(.5,.5),a.x=a.x+a.width/2,a.y=a.y+a.height/2,t.asArr.push(a))}),this.config.option.forEach(function(a,i){e.map(function(e,i){e.name==a.componentName&&t.fishArr.push({obj:e,audio:a.audio,text:a.text,scale:a.scale})})}),console.log("所有鱼.......",t.fishArr)}},{key:"cur",value:function(){console.log("加入小手=================="),this.cursorSprite=Object(u.createSprite)(Object(u.getTexture)("image_cursor_img_hover")),this.game.addChild(this.cursorSprite),this.cursorSprite2=Object(u.createSprite)(Object(u.getTexture)("image_cursor_img_down")),this.game.addChild(this.cursorSprite2),this.game.setChildIndex(this.cursorSprite,this.game.children.length-1),this.game.setChildIndex(this.cursorSprite2,this.game.children.length-2),this.cursorSprite2.alpha=0,this.game.interactive=!0;var t=this;this.game.on("pointerover",function(e){document.body.style.cursor="none",t.cursorSprite.x=e.data.global.x,t.cursorSprite.y=e.data.global.y}),this.game.on("pointerout",function(t){document.body.style.cursor="normal"}),this.game.on("pointermove",function(e){t.cursorSprite.x=e.data.global.x,t.cursorSprite.y=e.data.global.y})}},{key:"style",value:function(){return{fontSize:this.config.textStyle.fontSize,fontFamily:this.config.textStyle.fontFamily,fill:this.config.textStyle.color,fontWeight:this.config.textStyle.fontWeight}}},{key:"entrance",value:function(){console.log("入场动画=============",this.config),this.gameBgAnimate=Object(u.getAnimation)("animation_kaichang"),this.gameBgAnimate.state.setAnimation(1,"animation",!1),this.gameBgAnimate.x=960,this.gameBgAnimate.y=560,this.gameBgAnimate.scale.set(1,1),this.game.addChild(this.gameBgAnimate)}},{key:"initFishBox",value:function(){var t=this;console.log("初始化鱼框===========");var e=this;this.config.rightAnswer.forEach(function(t){e.asArr.map(function(a,i){if(t.componentName==a.name){var s=t.text.split(",");e.fishAnswer.push({obj:a,animateName:t.animate,success_animate:e.success_animate,rightoption:s}),e.temfishAnswer.push(s)}})}),this.fishAnswer.map(function(e){var a=e.obj.x-e.obj.width/2,i=e.obj.y-e.obj.height/2,s=parseFloat(e.obj.width/2)+parseFloat(a),n=parseFloat(e.obj.height/2)+parseFloat(i);t.classPosArr.push({top:i,left:a,width:s,height:n})}),this.temfishAnswer.map(function(e){e.map(function(e){t.allfishAnswer.push(e)})})}},{key:"sportFish",value:function(){var t=this;this.isInit||(this.fishArr.forEach(function(e,a){a<6?t.leftFish1(e,a):t.rightFish1(e,a)}),this.isInit=!0),this.isInit&&(console.log("初始化完毕==============="),this.init_left_sport(this.leftfishArr),this.init_right_sport(this.rightfishArr)),this.game.setChildIndex(this.gameBgAnimate,this.game.children.length-1)}},{key:"leftFish1",value:function(t,e){var a=t.obj,i=a.state.data.skeletonData.animations[0].name;a.state.setAnimation(0,i,!0),a.x=Math.floor(1080*Math.random()+154),a.y=Math.floor(500*Math.random()+360),a.buttonMode=!0,a.interactive=!0,a.reverse=!1,a.audio=t.audio,a.scaleValue=t.scale;var s=t.scale;a.itemAnimate=new TimelineMax,this.leftfishArr.push({obj:a,scale:s,itemAnimate:a.itemAnimate}),a.draging=!1,a.text=t.text,a.index=e,a.startX=null,a.startY=null,a.upX=null,a.upY=null,a.time=null,a.move=!1,a.answerInfo=null,a.offplay=!1,a.status=!0;var n=this;a.audios={error:n.config.audios.error_name,success:n.config.audios.success_name},a.on("pointerover",function(t){n.onDragOver(t,a,n)}),a.on("pointerdown",function(t){n.onDragDown(t,a,n)}),a.on("pointermove",function(t){n.onDragMove(t,a,n)}),a.on("pointerup",function(t){n.onDragUp(t,a,n)})}},{key:"rightFish1",value:function(t,e){var a=t.obj,i=t.scale;a.scale.set(parseFloat(-i),parseFloat(i)),a.children[2].children[0].scale.set(parseFloat(-i),parseFloat(i));var s=a.state.data.skeletonData.animations[0].name;a.state.setAnimation(0,s,!0),a.x=Math.floor(1080*Math.random()+154),a.y=Math.floor(500*Math.random()+360),a.reverse=!0,a.buttonMode=!0,a.interactive=!0,a.audio=t.audio,a.scaleValue=i,a.itemAnimate=new TimelineMax,this.rightfishArr.push({obj:a,scale:i,itemAnimate:a.itemAnimate}),a.draging=!1,a.text=t.text,a.status=!0,a.index=e,a.startX=null,a.startY=null,a.upX=null,a.upY=null,a.time=null,a.move=!1,a.answerInfo=null,a.offplay=!1;var n=this;a.audios={error:n.config.audios.error_name,success:n.config.audios.success_name},a.on("pointerover",function(t){n.onDragOver(t,a,n)}),a.on("pointerdown",function(t){n.onDragDown(t,a,n)}),a.on("pointermove",function(t){n.onDragMove(t,a,n)}),a.on("pointerup",function(t){n.onDragUp(t,a,n)})}},{key:"init_left_sport",value:function(t){var e=this;t.map(function(t,a){t.itemAnimate.to(t.obj,a+10,{x:0,ease:Power0.easeNone,onComplete:function(){t.obj.reverse=!t.obj.reverse,e.rTurn(t.obj),e.rightSport(t.itemAnimate,t.obj,a)}})})}},{key:"rTurn",value:function(t){t.scale.set(-parseFloat(t.scaleValue),parseFloat(t.scaleValue)),t.children[2].children[0].scale.set(-parseFloat(t.scaleValue),parseFloat(t.scaleValue))}},{key:"rightSport",value:function(t,e,a){var i=this;t.fromTo(e,a+10,{x:0},{x:1920,ease:Power0.easeNone,onComplete:function(){e.reverse=!e.reverse,i.lTurn(e),i.leftSport(t,e,a)}})}},{key:"lTurn",value:function(t){t.scale.set(parseFloat(t.scaleValue),parseFloat(t.scaleValue)),t.children[2].children[0].scale.set(parseFloat(t.scaleValue),parseFloat(t.scaleValue))}},{key:"init_right_sport",value:function(t){var e=this;t.map(function(t,a){t.itemAnimate.to(t.obj,a+10,{x:1920,ease:Power0.easeNone,onComplete:function(){t.obj.reverse=!t.obj.reverse,e.lTurn(t.obj),e.leftSport(t.itemAnimate,t.obj,a)}})})}},{key:"leftSport",value:function(t,e,a){var i=this;t.fromTo(e,a+10,{x:1920},{x:0,ease:Power0.easeNone,onComplete:function(){e.reverse=!e.reverse,i.rTurn(e),i.rightSport(t,e,a)}})}},{key:"onDragOver",value:function(t,e,a){e.cursor="none",a.cursorSprite.alpha=1,a.cursorSprite2.alpha=0,a.game.setChildIndex(a.cursorSprite,a.game.children.length-1)}},{key:"onDragDown",value:function(t,e,a){e.cursor="none",a.cursorSprite.alpha=0,a.cursorSprite2.alpha=1,e.startX=e.x,e.startY=e.y,e.data=t.data,e.draging=!0,a.cursorSprite.x=e.x,a.cursorSprite.y=e.y,a.cursorSprite2.x=e.x,a.cursorSprite2.y=e.y,a.game.getChildByName("componentContainer").setChildIndex(e,a.game.getChildByName("componentContainer").children.length-3),e.time=setTimeout(function(){var t=e.state.data.skeletonData.animations[1].name;e.state.setAnimation(1,t,!0),a.game.getChildByName("componentContainer").setChildIndex(e,a.game.getChildByName("componentContainer").children.length-3),a.game.setChildIndex(a.cursorSprite2,a.game.children.length-2),e.move=!0},300),e.itemAnimate.paused(!0),console.log(e.audio),res[e.audio].sound.play()}},{key:"onDragMove",value:function(t,e,a){if(e.draging){e.cursor="none",e.move&&(a.cursorSprite.alpha=0,a.cursorSprite2.x=t.data.global.x-a.cursorSprite2.width/2,a.cursorSprite2.y=t.data.global.y-a.cursorSprite2.height/2,a.game.setChildIndex(a.cursorSprite2,a.game.children.length-1));var i=t.data.getLocalPosition(e.parent);if(i.x>30&&i.x<1890&&i.y>40&&i.y<1040){e.x=i.x,e.y=i.y;for(var s=0;s<a.classPosArr.length;s++)e.reverse?e.x+e.width/2>parseFloat(a.classPosArr[s].width)||e.x-e.width/2<parseFloat(a.classPosArr[s].left)||e.y-e.height/2>parseFloat(a.classPosArr[s].height)||e.y+e.height/2<parseFloat(a.classPosArr[s].top)?(console.log("反向没碰到"),a.fishAnswer[s].obj.scale.set(1,1)):(console.log("方向碰到了"),a.fishAnswer[s].obj.scale.set(1.2,1.2)):e.x-e.width/2>parseFloat(a.classPosArr[s].width)||e.x+e.width/2<parseFloat(a.classPosArr[s].left)||e.y-e.height/2>parseFloat(a.classPosArr[s].height)||e.y+e.height/2<parseFloat(a.classPosArr[s].top)?(console.log("2222没碰到"),a.fishAnswer[s].obj.scale.set(1,1)):(console.log("2222碰到了"),a.fishAnswer[s].obj.scale.set(1.2,1.2))}else{console.log("从别处放开了"),clearTimeout(e.time);var n=e.stateData.skeletonData.animations[0].name;if(e.state.setAnimation(1,n,!0),e.draging=!1,e.itemAnimate.paused(!0),e.reverse=!e.reverse,e.reverse){a.rTurn(e);var o=new TimelineMax;a.rt(e,o,e.index),e.itemAnimate=o}else{a.lTurn(e);var l=new TimelineMax;a.lt(e,l,e.index),e.itemAnimate=l}}}}},{key:"onDragUp",value:function(t,e,a){var i=a.game;a.cursorSprite2.alpha=0,a.cursorSprite.alpha=1,e.move=!1;var s=t.target;e.upX=s.x,e.upY=s.y,e.x=e.upX,e.y=e.upY,clearTimeout(e.time);var n=e.stateData.skeletonData.animations[0].name;if(e.state.setAnimation(1,n,!0),i.getChildByName("componentContainer").setChildIndex(e,i.getChildByName("componentContainer").children.length-3),e.draging=!1,s.data=null,e.upX==e.startX||e.upY==e.startY)console.log("没拖拽"),e.itemAnimate.paused(!1);else if(console.log("拖拽了....."),e.upX<30&&(e.upX=30),e.upX>1890&&(e.upX=1890),e.upY<400&&(e.upY=400),e.upY>1030&&(e.upY=1030),e.itemAnimate.paused(!0),e.reverse=!e.reverse,e.reverse){a.rTurn(e);var o=new TimelineMax;a.rt(e,o,e.index),e.itemAnimate=o}else{a.lTurn(e);var l=new TimelineMax;a.lt(e,l,e.index),e.itemAnimate=l}for(var r=0;r<a.classPosArr.length;r++)e.reverse?e.x+e.width/2>parseFloat(a.classPosArr[r].width)||e.x-e.width/2<parseFloat(a.classPosArr[r].left)||e.y-e.height/2>parseFloat(a.classPosArr[r].height)||e.y+e.height/2<parseFloat(a.classPosArr[r].top)?console.log("up反向没碰到"):(console.log("up反向碰到了"),e.answerInfo=a.fishAnswer[r],e.offplay=!0):e.x-e.width/2>parseFloat(a.classPosArr[r].width)||e.x+e.width/2<parseFloat(a.classPosArr[r].left)||e.y-e.height/2>parseFloat(a.classPosArr[r].height)||e.y+e.height/2<parseFloat(a.classPosArr[r].top)?console.log("2222up没碰到"):(console.log("2222up碰到了"),e.answerInfo=a.fishAnswer[r],e.offplay=!0);if(null!=e.answerInfo)if(a.IsInArray(e.answerInfo.rightoption,e.text)&&e.status)a.tempArr.push(e.text),console.log("正确"),(new TimelineMax).to(e.answerInfo.obj,.1,{alpha:0,onComplete:function(){console.log(e.answerInfo.animateName.name);var t=Object(u.getAnimation)(e.answerInfo.animateName.name);if(t.state.setAnimation(1,"animation",!1),t.pivot.set(parseInt(t.width/2),parseInt(t.height)),t.x=parseInt(t.width)+parseInt(e.answerInfo.animateName.x),t.y=parseInt(2*t.height)+parseInt(e.answerInfo.animateName.y)-50,i.addChild(t),res[e.audios.success].sound.play(),i.getChildByName("componentContainer").removeChild(e),e.status=!1,!e.status)var s=setTimeout(function(){t.destroy(),e.answerInfo.obj.alpha=1,e.answerInfo.obj.scale.set(1,1),clearTimeout(s)},1e3);if(a.allfishAnswer.length==a.tempArr.length&&t.off)var n=setTimeout(function(){if(console.log("全部正确"),a.success_animate.show){var t=Object(u.getAnimation)(a.success_animate.name);t.state.setAnimation(0,"animation",!1),t.pivot.set(parseInt(t.width/2),parseInt(t.height)),t.x=parseInt(t.width)+parseInt(e.answerInfo.success_animate.x),t.y=parseInt(2*t.height)+parseInt(e.answerInfo.success_animate.y-50),a.fishAnswer.map(function(t){i.getChildByName("componentContainer").removeChild(t.obj)}),i.addChild(t)}setTimeout(function(){if(question.interface){var t=new h.a;t.init({type:0,useranswer:"",answer:"",id:0,rightnum:1,wrongnum:0}),store.dispatch("pushToPostArr",t),store.dispatch("postAnswer")}else{var e=new h.a;e.init({type:0,useranswer:"",answer:"",id:0,rightnum:1,wrongnum:0}),store.dispatch("pushToPostArr",e),store.dispatch("postAnswer")}},question.one.end.jumpResultTime),clearTimeout(n)},1500);else console.log("88888888888")}});else if(console.log("错误"),e.offplay)if(res[e.audios.error].sound.play(),e.offplay=!1,e.answerInfo.obj.scale.set(1,1),e.upX=e.startX,e.upY=e.startY,e.itemAnimate.paused(!0),e.reverse=!e.reverse,e.reverse){a.lTurn(e);var c=new TimelineMax;a.lt(e,c,e.index),e.itemAnimate=c}else{a.rTurn(e);var m=new TimelineMax;a.rt(e,m,e.index),e.itemAnimate=m}else e.answerInfo.obj.scale.set(1,1)}},{key:"rt",value:function(t,e,a){var i=this;e.fromTo(t,a+5,{x:t.upX,y:t.upY},{x:1920,y:t.upY,ease:Power0.easeNone,onComplete:function(){t.reverse=!t.reverse,i.lTurn(t),i.leftSport(e,t,a)}})}},{key:"lt",value:function(t,e,a){var i=this;e.fromTo(t,a+5,{x:t.upX,y:t.upY},{x:0,y:t.upY,ease:Power0.easeNone,onComplete:function(){t.reverse=!t.reverse,i.rTurn(t),i.rightSport(e,t,a)}})}},{key:"IsInArray",value:function(t,e){if(null!==t)return-1!=(","+t.join(",")+",").indexOf(","+e+",")}}]),t}()),y=void 0,_={name:"start",data:function(){return{number:0}},methods:{createApp:function(){return new s.Application({width:1920,height:1080,autoSize:!0,transparent:!0})}},created:function(){document.getElementsByClassName("page-loading")[0].style.display="block"},destroyed:function(){PIXI.sound.stopAll(),app.destroy()},mounted:function(){var t=this;PIXI.sound.stopAll(),document.getElementsByClassName("page-loading")[0].style.display="block",window.app=this.createApp(),app.view.style.width="19.2rem",app.view.style.height="10.8rem",app.view.id="appCanvas",window.stage=app.stage;this.$refs.canvas.appendChild(app.view),stage.interactive=!0,Object(u.load)().then(function(e){console.log("%c资源加载完啦✌️","color:#FF323B;font-weight:bold;"),t.$nextTick(function(){window.question=e.question.data,y=e.question.data,e.question.data,store.state.testNum=e.question.data.sources.length,console.log(t.allData),document.getElementsByClassName("page-loading")[0].style.display="none","undefined"===t.$route.query.id||void 0===t.$route.query.id?t.number=0:t.number=parseInt(t.$route.query.id);var a=new g.a(y.one.start,e);(Object(h.b)(),(new h.a).answerDefault({type:0,useranswer:[]}),Object(h.c)({id:"0",currentTotalOption:"1"}),Object(p.RenderAllData)(!1,y),window.question.one.start.show)?"true"===t.$route.query.startStatus||"undefined"===t.$route.query.startStatus||void 0===t.$route.query.startStatus?(stage.addChild(a),a.button(function(){stage.removeChild(a),(new x).exec()})):(new x).exec():(new x).exec()})})}},S={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container"},[e("div",{ref:"canvas",staticClass:"canvas"}),this._v(" "),e("img",{staticClass:"logo",attrs:{src:"static/images/logo.png",id:"logo"}})])},staticRenderFns:[]};var C=a("C7Lr")(_,S,!1,function(t){a("v9gP")},"data-v-2d6c5512",null).exports,D=a("zYyf");i.default.use(m.a);var B=new m.a({routes:[{path:"/",component:C},{path:"/edit",component:D.a},{path:"/preview",component:D.b}]}),I=a("glag"),A=a.n(I),k=(a("xlLU"),a("Otmz")),N=a.n(k),T=a("CtzY"),F=a.n(T);i.default.config.productionTip=!1,i.default.prototype.$http=N.a,i.default.prototype.qs=F.a,i.default.use(A.a),new i.default({el:"#app",router:B,components:{App:c},store:store,template:"<App/>"})},Nd8d:function(t,e){},OM2L:function(t,e){},Q1qI:function(t,e){},RQpN:function(t,e){},SYJf:function(t,e){},aGwf:function(t,e){},aoyp:function(t,e){},epwY:function(t,e){},v9gP:function(t,e){},wcXr:function(t,e){},xlLU:function(t,e){},zel7:function(t,e,a){"use strict";var i={data:function(){return{resultDate:store.state.resultArr}},mounted:function(){console.log("平台校验结果页出现")}},s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("el-table",{staticClass:"resultTable",staticStyle:{width:"19.2rem",positon:"absolute",left:"50%","margin-left":"-9.6rem",top:"-5rem",padding:"0 1rem"},attrs:{data:this.resultDate}},[e("el-table-column",{staticStyle:{width:"1rem"},attrs:{prop:"id",label:"题号"}}),this._v(" "),e("el-table-column",{staticStyle:{"text-align":"center"},attrs:{prop:"userAnswerContent",label:"你的答案"}}),this._v(" "),e("el-table-column",{attrs:{prop:"rightAnswerContent",label:"正确答案"}}),this._v(" "),e("el-table-column",{attrs:{prop:"isRight",label:"校验结果"}})],1)},staticRenderFns:[]};var n=a("C7Lr")(i,s,!1,function(t){a("aGwf")},"data-v-0b169922",null);e.a=n.exports},zwgh:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.load=function(){return window.res?new s.a(function(t,e){console.info(2),t(window.res)}):(console.info(1),new s.a(function(t,e){o.add("question","static/content.json"),o.add("resources","static/resource.json"),o.load(function(){var e=PIXI.loader.resources.resources.data;e.forEach(function(t){if(o.add(t.key,t.path),t.key.indexOf("image")>-1){var e=new Image;e.src=t.path,e.onerror=function(t){console.log(t),errorArr.unshift(dataAssembling({msg:"Resource not loaded error",url:t.target.src,type:"resourceLoadERROR"}))}}else if(t.key.indexOf("audio")>-1){var a=new Audio;a.src=t.path,a.onerror=function(e){errorArr.unshift(dataAssembling({msg:"Resource not loaded error",url:t.path,type:"resourceLoadERROR"}))}}}),o.load(function(e,a){window.res=a,t(a)}),o.onError.add(function(t){console.log(t)}),o.onProgress.add(function(t){document.getElementsByClassName("runner")[0].style.width=6.8*t.progress/100+"rem"}),o.onComplete.add(function(t){})})}))},e.getAnimation=function(t){return new PIXI.spine.Spine(res[t].spineData)},e.getSound=function(t){return res[t].data},e.createSprite=function(t){return console.log(new n.Sprite(t)),new n.Sprite(t)},e.getOptionTexture=function(t,e){return res[t].textures[e]},e.getTexture=function(t){return res[t].texture};var i=a("rVsN"),s=a.n(i),n=a("9bLE"),o=(a.n(n),a("an7y"),PIXI.loader)}},["NHnr"]);